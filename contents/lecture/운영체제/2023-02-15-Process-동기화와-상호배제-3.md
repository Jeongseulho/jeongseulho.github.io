---
title: Process ë™ê¸°í™”ì™€ ìƒí˜¸ë°°ì œ 3
categories: [ìš´ì˜ì²´ì œ]
date: 2023-02-15 01:00:00 +0900
tags: [CS]
---

## ğŸ“ŒHWë¥¼ ì´ìš©í•˜ì—¬ ME êµ¬í˜„

### ğŸ“–TestAndSet instruction

- Test, Setì„ í•œë²ˆì— í•˜ëŠ” ê¸°ê³„ì–´
- machine instruction
  - ì‹¤í–‰ ì¤‘ ì¸í„°ëŸ½íŠ¸ ë°›ì§€ ì•ŠìŒ, preemption ë˜ì§€ì•ŠìŒ
- ë‹¨, 3ê°œì´ìƒì˜ í”„ë¡œì„¸ìŠ¤ì—ëŒ€í•´ bounded waiting ìœ„ë°°

```java
boolean TestAndSet (boolean *target) {
	boolean temp = *target;
    *target = true;
    return temp;
}
```

![](https://velog.velcdn.com/images/wjdtmfgh/post/5e457ee7-4873-40d7-85fa-295d49c97e19/image.png)

### ğŸ“–N-process ME

![](https://velog.velcdn.com/images/wjdtmfgh/post/23bfcfd4-a684-4dbb-91dd-780204adcf13/image.png)

## â—ï¸HW solution of ME íŠ¹ì§•

- êµ¬í˜„ ì‰¬ì›€
- busy waiting ë¬¸ì œ

## ğŸ“ŒOSë¥¼ ì´ìš©í•˜ì—¬ ME êµ¬í˜„

### ğŸ“–spinLock

- S ì´ˆê¸°í™”, P(), V() ì—°ì‚°ìœ¼ë¡œë§Œ ì ‘ê·¼ ê°€ëŠ¥ (ì •ìˆ˜í˜• ë³€ìˆ˜ S)
- ìœ„ ì—°ì‚°ë“¤ì€ atomic ì¦‰, preemption ë˜ì§€ì•Šê²Œ OSê°€ ë³´ì¥
- ë©€í‹° í”„ë¡œì„¸ì„œì—ì„œë§Œ ì‚¬ìš© ê°€ëŠ¥
- busy waiting

```java
P(S) { // ë¬¸ ì ê·¸ê¸°
	while (S<=0) do
    endWhile;
    S = S-1
}

V(S) { // ì ê¸ˆ í’€ê¸°
	S = S+1
}
```

![](https://velog.velcdn.com/images/wjdtmfgh/post/cb416c13-cdc5-4c28-ab62-fd786f8c740e/image.png)

### ğŸ“–semaphore

- S ì´ˆê¸°í™”, P(), V() ì—°ì‚°ìœ¼ë¡œë§Œ ì ‘ê·¼ ê°€ëŠ¥ (ì •ìˆ˜í˜• ë³€ìˆ˜ S)
- ìœ„ ì—°ì‚°ë“¤ì€ atomic ì¦‰, preemption ë˜ì§€ì•Šê²Œ OSê°€ ë³´ì¥
- ì°¨ì´ì  : Së³€ìˆ˜ì— ëŒ€ì‘í•˜ëŠ” ready queue í• ë‹¹

```java
P(S) {
	if (S>0)
    then S = S - 1;
    else wait on the queue;
}

V(S) {
	if (waiting process on queue)
    then wake up one of them;
    else S = S + 1;
}
```

### binary semaphore

- Sê°€ 0 ë˜ëŠ” 1
- ME, ë™ê¸°í™” ëª©ì ìœ¼ë¡œ ì‚¬ìš©

### counting semaphore

- Sê°€ 0ì´ìƒì˜ ì •ìˆ˜ê°’ ê°€ì§ˆ ìˆ˜ ìˆìŒ
- producer - consumer ë¬¸ì œ í•´ê²°

### ğŸ“šsemaphoreë¡œ í•´ê²° ê°€ëŠ¥í•œ ë¬¸ì œë“¤

- ìƒí˜¸ë°°ì œ ë¬¸ì œ
- í”„ë¡œì„¸ìŠ¤ ë™ê¸°í™” ë¬¸ì œ
- ìƒì‚°ì-ì†Œë¹„ì ë¬¸ì œ
- Reader-writer ë¬¸ì œ
- Dining philosopher problem

### í”„ë¡œì„¸ìŠ¤ ë™ê¸°í™” ë¬¸ì œ

- í”„ë¡œì„¸ìŠ¤ì˜ ì‹¤í–‰ ìˆœì„œ ë§ì¶”ê¸°
- í”„ë¡œì„¸ìŠ¤ë“¤ì€ ë³‘í–‰ì ì´ë©°, ë¹„ë™ê¸°ì ìœ¼ë¡œ ìˆ˜í–‰
  ![](https://velog.velcdn.com/images/wjdtmfgh/post/eb1d870f-4cdc-4c49-9372-716302e3d3a9/image.png)

### ìƒì‚°ì-ì†Œë¹„ì ë¬¸ì œ

- ìƒì‚°ì(Producer) í”„ë¡œì„¸ìŠ¤
  - ì»´íŒŒì¼ëŸ¬ : ì–´ì…ˆë¸”ë¦¬ ì½”ë“œ ìƒì„±
  - ì–´ì…ˆë¸”ëŸ¬ : ì ì¬ ëª¨ë“ˆ ìƒì„±
- ì†Œë¹„ì(Consumer) í”„ë¡œì„¸ìŠ¤

  - ì»´íŒŒì¼ëŸ¬ : ì–´ì…ˆë¸”ë¦¬ ì½”ë“œ ìƒì„±
  - ì–´ì…ˆë¸”ëŸ¬ : ì ì¬ ëª¨ë“ˆ ìƒì„±

- producer-consumer with single buffer
  ![](https://velog.velcdn.com/images/wjdtmfgh/post/72e5cafe-25e9-4fd4-bcc4-2b7c7295475e/image.png)

- producer-consumer with N-buffer
  ![](https://velog.velcdn.com/images/wjdtmfgh/post/ffc94042-58c6-41de-8f8c-161895c74a84/image.png)

### Reader-writer ë¬¸ì œ

- Reader : ë°ì´í„° ì½ê¸° ì—°ì‚° ìˆ˜í–‰
- Writer : ë°ì´í„° ê°±ì‹  ì—°ì‚° ìˆ˜í–‰

1. Readerë“¤ì€ ë™ì‹œì— ë°ì´í„° ì ‘ê·¼ ê°€ëŠ¥
2. Writerë“¤ì€ ë™ì‹œì— ë°ì´í„° ì ‘ê·¼ ë¶ˆê°€
3. Reader, Writerì€ ë™ì‹œì— ë°ì´í„° ì ‘ê·¼ ë¶ˆê°€
   ![](https://velog.velcdn.com/images/wjdtmfgh/post/69069d8f-39d2-4ffc-9f92-9b701ccaee5b/image.png)

### â—ï¸Semaphore íŠ¹ì§•

- No busy waiting : ê¸°ë‹¤ë ¤ì•¼í•˜ëŠ” í”„ë¡œì„¸ìŠ¤ëŠ” blockìƒíƒœë¡œ ê¸°ë‹¤ë¦¼
- semaphaore queueì— ëŒ€í•œ wake-up ìˆœì„œëŠ” ë¹„ê²°ì •ì  ì¦‰, starvation problem
