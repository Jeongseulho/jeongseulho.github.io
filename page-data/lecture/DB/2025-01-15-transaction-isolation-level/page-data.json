{"componentChunkName":"component---src-templates-lecture-template-tsx","path":"/lecture/DB/2025-01-15-transaction-isolation-level/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<h1 id=\"sql-표준-격리-레벨\" style=\"position:relative;\"><a href=\"#sql-%ED%91%9C%EC%A4%80-%EA%B2%A9%EB%A6%AC-%EB%A0%88%EB%B2%A8\" aria-label=\"sql 표준 격리 레벨 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>SQL 표준 격리 레벨</h1>\n<p>SQL 표준에서는 <code class=\"language-text\">dirty read</code>, <code class=\"language-text\">non-repeatable read</code>, <code class=\"language-text\">phantom read</code>라는 3가지 이상 현상의 발생을 막을지 혹은 허용할지에 따라 4가지 격리 레벨을 정의하고 있다.<br>\n<img src=\"https://github.com/user-attachments/assets/fcce45b6-72f2-46c0-a862-9beecb86af8e\" alt=\"Image\"></p>\n<ul>\n<li>또한 <code class=\"language-text\">serializable</code>은 3가지 이상 현상과 더불어 모든 이상 현상을 막는 격리 레벨이다.</li>\n<li>높은 격리 레벨은 데이터 일관성을 보장하지만 성능이 떨어진다.</li>\n</ul>\n<h2 id=\"dirty-read\" style=\"position:relative;\"><a href=\"#dirty-read\" aria-label=\"dirty read permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>dirty read</h2>\n<ul>\n<li>한 트랜잭션이 다른 트랜잭션의 커밋되지 않은 데이터를 읽은 것</li>\n</ul>\n<p><img src=\"https://github.com/user-attachments/assets/42206411-afb8-45f2-93d1-71c0380820b2\" alt=\"Image\"></p>\n<ul>\n<li><code class=\"language-text\">x</code>는 <code class=\"language-text\">t2</code>의 커밋되지 않은 데이터를 읽고 그것에 기반하여 계산한 결과</li>\n<li><code class=\"language-text\">t2</code>가 롤백되면 <code class=\"language-text\">x</code>는 무효한 값이 된다.</li>\n</ul>\n<h2 id=\"non-repeatable-read\" style=\"position:relative;\"><a href=\"#non-repeatable-read\" aria-label=\"non repeatable read permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>non-repeatable read</h2>\n<ul>\n<li>같은 데이터를 두 번 읽었을 때 다른 값을 읽는 것</li>\n</ul>\n<p><img src=\"https://github.com/user-attachments/assets/61c5eaad-ff59-46b4-b59f-07bd437236ba\" alt=\"Image\"></p>\n<ul>\n<li><code class=\"language-text\">isolation</code>은 트랜잭션이 각각 혼자 있는 것처럼 진행되어야 하지만, 이를 어기게 됨.</li>\n</ul>\n<h2 id=\"phantom-read\" style=\"position:relative;\"><a href=\"#phantom-read\" aria-label=\"phantom read permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>phantom read</h2>\n<ul>\n<li>같은 조건으로 데이터를 두 번 읽었는데, 없던 데이터가 생김.</li>\n</ul>\n<p><img src=\"https://github.com/user-attachments/assets/ee2c43c7-52ad-4998-a422-ad30733bb830\" alt=\"Image\"></p>\n<ul>\n<li>마찬가지로 <code class=\"language-text\">isolation</code>은 트랜잭션이 각각 혼자 있는 것처럼 진행되어야 하지만, 이를 어기게 됨.</li>\n</ul>\n<h1 id=\"그-밖의-이상-현상\" style=\"position:relative;\"><a href=\"#%EA%B7%B8-%EB%B0%96%EC%9D%98-%EC%9D%B4%EC%83%81-%ED%98%84%EC%83%81\" aria-label=\"그 밖의 이상 현상 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>그 밖의 이상 현상</h1>\n<p>표준 SQL 92의 논문을 비판하는 또 다른 논문에서 제시한 이상 현상</p>\n<h2 id=\"dirty-write\" style=\"position:relative;\"><a href=\"#dirty-write\" aria-label=\"dirty write permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>dirty write</h2>\n<ul>\n<li>커밋이 안된 데이터를 <code class=\"language-text\">write</code>하는 것</li>\n</ul>\n<p><img src=\"https://github.com/user-attachments/assets/66d7acb9-e5d2-4101-a491-3005d4271485\" alt=\"Image\"></p>\n<ul>\n<li><code class=\"language-text\">t2</code>는 롤백되면 <code class=\"language-text\">x</code>를 10으로 되돌림, 하지만 10은 <code class=\"language-text\">t1</code>이 쓰다가 롤백한 값임.</li>\n</ul>\n<h2 id=\"lost-update\" style=\"position:relative;\"><a href=\"#lost-update\" aria-label=\"lost update permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>lost update</h2>\n<ul>\n<li>두 트랜잭션이 겹쳐셔 나중에 커밋된 트랜잭션만 반영 되는 것것</li>\n</ul>\n<h2 id=\"dirty-readwithout-abort\" style=\"position:relative;\"><a href=\"#dirty-readwithout-abort\" aria-label=\"dirty readwithout abort permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>dirty read(without abort)</h2>\n<ul>\n<li>커밋이 안된 데이터를 <code class=\"language-text\">read</code>하는 것</li>\n</ul>\n<p><img src=\"https://github.com/user-attachments/assets/720afccd-f80e-4c74-a18d-94179cf7cb76\" alt=\"Image\"></p>\n<ul>\n<li>계좌 총합은 100이지만 트랜잭션 중간에 커밋 안된 데이터를 읽으니 계좌 총합이 60임.</li>\n</ul>\n<h2 id=\"read-skew\" style=\"position:relative;\"><a href=\"#read-skew\" aria-label=\"read skew permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>read skew</h2>\n<ul>\n<li><code class=\"language-text\">inconsistent</code>한 데이터를 읽는 것</li>\n<li><code class=\"language-text\">non-repeatable read</code>와 <code class=\"language-text\">dirty read</code>와 같은 것들을 포함하는 개념</li>\n</ul>\n<p><img src=\"https://github.com/user-attachments/assets/8570da79-d979-449b-bbb2-0e962d73ec18\" alt=\"Image\"></p>\n<h2 id=\"write-skew\" style=\"position:relative;\"><a href=\"#write-skew\" aria-label=\"write skew permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>write skew</h2>\n<ul>\n<li><code class=\"language-text\">inconsistent</code>한 데이터를 쓰는 것</li>\n</ul>\n<p><img src=\"https://github.com/user-attachments/assets/ab791c90-fd15-4a26-847f-d817df6eac5a\" alt=\"Image\"></p>\n<ul>\n<li>x + y는 0 이상이라는 조건이 있지만, 이 조건을 만족하지 못하게 됨.</li>\n</ul>\n<h2 id=\"phantom-readnot-same-condition\" style=\"position:relative;\"><a href=\"#phantom-readnot-same-condition\" aria-label=\"phantom readnot same condition permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>phantom read(not same condition)</h2>\n<ul>\n<li><code class=\"language-text\">phantom read</code>와 같지만 꼭 같은 조건이 필수는 아님.</li>\n</ul>\n<p><img src=\"https://github.com/user-attachments/assets/ab7cd25e-b26e-418c-b514-4498fd85b457\" alt=\"Image\"></p>\n<h1 id=\"snapshot-isolation\" style=\"position:relative;\"><a href=\"#snapshot-isolation\" aria-label=\"snapshot isolation permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>snapshot isolation</h1>\n<p>동시성 제어의 동작 방법, 구현을 바탕으로 정의된 격리 레벨<br>\n앞서 SQL 표준 격리 레벨은 3가지 현상을 방지하거나 하지 않는 것으로 격리 레벨을 정의함.<br>\n<img src=\"https://github.com/user-attachments/assets/a1851fdc-05bb-4847-b33f-c300030ff6ed\" alt=\"Image\"></p>\n<ul>\n<li>트랜잭션 시작전의 커밋된 데이터의 스냅샷을 찍고 해당 스냅샷을 기준으로 트랜잭션을 진행</li>\n<li><code class=\"language-text\">lost update</code>가 발생하려 하면 먼저 커밋된 트랜잭션만 인정, 뒤에 커밋된 트랜잭션은 롤백</li>\n</ul>\n<h1 id=\"실무-rdbms에서의-격리-레벨\" style=\"position:relative;\"><a href=\"#%EC%8B%A4%EB%AC%B4-rdbms%EC%97%90%EC%84%9C%EC%9D%98-%EA%B2%A9%EB%A6%AC-%EB%A0%88%EB%B2%A8\" aria-label=\"실무 rdbms에서의 격리 레벨 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>실무 RDBMS에서의 격리 레벨</h1>\n<ul>\n<li>주요 RDBMS는 SQL 표준을 기반하여 격리 레벨을 정의</li>\n<li>RDBMS마다 제공하는 격리 레벨이 상이</li>\n<li>같은 이름의 격리 레벨이라도 동작이 다를 수 있음(ex. <code class=\"language-text\">postgres</code>는 SQL 표준의 4가지 격리 레벨 이름을 그대로 사용하지만, 3가지 현상 외에 다른 현상을 더 추가하여 격리 레벨을 정의)</li>\n</ul>","tableOfContents":"<ul>\n<li>\n<p><a href=\"#sql-%ED%91%9C%EC%A4%80-%EA%B2%A9%EB%A6%AC-%EB%A0%88%EB%B2%A8\">SQL 표준 격리 레벨</a></p>\n<ul>\n<li><a href=\"#dirty-read\">dirty read</a></li>\n<li><a href=\"#non-repeatable-read\">non-repeatable read</a></li>\n<li><a href=\"#phantom-read\">phantom read</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EA%B7%B8-%EB%B0%96%EC%9D%98-%EC%9D%B4%EC%83%81-%ED%98%84%EC%83%81\">그 밖의 이상 현상</a></p>\n<ul>\n<li><a href=\"#dirty-write\">dirty write</a></li>\n<li><a href=\"#lost-update\">lost update</a></li>\n<li><a href=\"#dirty-readwithout-abort\">dirty read(without abort)</a></li>\n<li><a href=\"#read-skew\">read skew</a></li>\n<li><a href=\"#write-skew\">write skew</a></li>\n<li><a href=\"#phantom-readnot-same-condition\">phantom read(not same condition)</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#snapshot-isolation\">snapshot isolation</a></p>\n</li>\n<li>\n<p><a href=\"#%EC%8B%A4%EB%AC%B4-rdbms%EC%97%90%EC%84%9C%EC%9D%98-%EA%B2%A9%EB%A6%AC-%EB%A0%88%EB%B2%A8\">실무 RDBMS에서의 격리 레벨</a></p>\n</li>\n</ul>","frontmatter":{"title":"transaction isolation level","date":"2025년 01월 15일","tags":["CS"]}}}]}},"pageContext":{"slug":"/lecture/DB/2025-01-15-transaction-isolation-level/","previous":{"fields":{"slug":"/lecture/DB/2025-01-14-동시성-제어(recoverability)/"},"frontmatter":{"categories":["DB"],"title":"동시성 제어(recoverability)","date":"2025-01-14 18:00:00 +0900","tags":["CS"]}},"next":{"fields":{"slug":"/lecture/DB/2025-01-16-동시성-제어(lock)/"},"frontmatter":{"categories":["DB"],"title":"동시성 제어(lock)","date":"2025-01-16 18:00:00 +0900","tags":["CS"]}}}},"staticQueryHashes":[],"slicesMap":{}}