{"componentChunkName":"component---src-templates-post-template-tsx","path":"/tech/2023-11-14-React-early-bailout/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<h2 id=\"0-ë“¤ì–´ê°€ë©°\" style=\"position:relative;\"><a href=\"#0-%EB%93%A4%EC%96%B4%EA%B0%80%EB%A9%B0\" aria-label=\"0 ë“¤ì–´ê°€ë©° permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>0. ë“¤ì–´ê°€ë©°</h2>\n<p>ìš°ì—°íˆ ìœ íŠœë¸Œì—ì„œ ë©´ì ‘ ì§ˆë¬¸ì„ ë³´ì•˜ë‹¤. ë‹¤ìŒ ì½”ë“œì˜ ì½˜ì†”ì„ ë§ì¶”ëŠ” ë¬¸ì œì¸ë°</p>\n<div\n              class=\"gatsby-code-button-container\"\n              data-toaster-id=\"34621864233443865000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"ğŸ“‹  ì½”ë“œë¥¼ ë³µì‚¬í–ˆìŠµë‹ˆë‹¤.\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`  const [state, setState] = useState(0);\r\n  console.log('state', state);\r\n\r\n  useEffect(() => {\r\n    setState(1);\r\n  }, [state]);`, `34621864233443865000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"\"\n              >\n                copy<svg stroke=\"currentColor\" fill=\"none\" stroke-width=\"2\" viewBox=\"0 0 24 24\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"h-4 w-4\" height=\"1em\" width=\"1em\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2\"></path><rect x=\"8\" y=\"2\" width=\"8\" height=\"4\" rx=\"1\" ry=\"1\"></rect></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\">  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">,</span> setState<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'state'</span><span class=\"token punctuation\">,</span> state<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>ì²˜ìŒ ë Œë”ì‹œ <code class=\"language-text\">state 0</code>, ì´í›„ <code class=\"language-text\">setState(1)</code>ì´ í˜¸ì¶œë˜ê³  ë‹¤ì‹œ ë Œë”ì‹œ <code class=\"language-text\">state 1</code>, <code class=\"language-text\">useEffect</code>ì˜ ì˜ì¡´ì„± ë°°ì—´ì— <code class=\"language-text\">state</code>ê°€ ìˆìœ¼ë¯€ë¡œ <code class=\"language-text\">setState(1)</code>ì´ í˜¸ì¶œ ë˜ì§€ë§Œ <code class=\"language-text\">1</code> => <code class=\"language-text\">1</code>ë¡œ ìƒíƒœê°€ ë³€í•˜ì˜€ìœ¼ë¯€ë¡œ ë‹¤ì‹œ ë Œë”ê°€ ì¼ì–´ë‚˜ì§€ ì•Šì„ ê²ƒì´ë¯€ë¡œ ì •ë‹µì„ <code class=\"language-text\">state 0</code>, <code class=\"language-text\">state 1</code>ì´ë¼ ìƒê°í–ˆë‹¤.<br>\ní•˜ì§€ë§Œ ì •ë‹µì€ <code class=\"language-text\">state 0</code>, <code class=\"language-text\">state 1</code>, <code class=\"language-text\">state 1</code>ì´ì—ˆë‹¤.<br>\nìœ íŠœë¸Œì—ì„œì˜ ì„¤ëª…ë„ ë‚˜ë‘ ì™„ì „íˆ ê°™ì§€ë§Œ <code class=\"language-text\">setState(1)</code>ì´ í˜¸ì¶œ ë˜ì–´ <code class=\"language-text\">1</code> => <code class=\"language-text\">1</code>ë¡œ ìƒíƒœê°€ ë³€í•˜ì§€ ì•ŠìŒì—ë„ ë Œë”ê°€ ì¼ì–´ë‚œë‹¤ê³  ì„¤ëª…í•œë‹¤. ë‚˜ëŠ” ì´í•´ê°€ ê°€ì§€ ì•Šì•˜ë‹¤, ë¶„ëª… <code class=\"language-text\">setState</code>ê°€ í˜¸ì¶œë˜ì–´ë„ ìƒíƒœê°€ ë³€í•˜ì§€ ì•Šìœ¼ë©´ ìµœì í™”ë¡œ ë¦¬ë Œë”ë§ì´ ì¼ì–´ë‚˜ì§€ ì•ŠëŠ”ë‹¤ê³  ì•Œê³  ìˆì—ˆê¸° ë•Œë¬¸ì´ë‹¤.</p>\n<p>ë‹¤ìŒ ì½”ë“œë¥¼ í™•ì¸í•´ ë³´ì.</p>\n<div\n              class=\"gatsby-code-button-container\"\n              data-toaster-id=\"18682009627381490000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"ğŸ“‹  ì½”ë“œë¥¼ ë³µì‚¬í–ˆìŠµë‹ˆë‹¤.\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`  const [state, setState] = useState(0);\r\n  console.log('state', state);\r\n\r\n  useEffect(() => {\r\n    setState(0);\r\n  }, [state]);`, `18682009627381490000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"\"\n              >\n                copy<svg stroke=\"currentColor\" fill=\"none\" stroke-width=\"2\" viewBox=\"0 0 24 24\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"h-4 w-4\" height=\"1em\" width=\"1em\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2\"></path><rect x=\"8\" y=\"2\" width=\"8\" height=\"4\" rx=\"1\" ry=\"1\"></rect></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\">  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">,</span> setState<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'state'</span><span class=\"token punctuation\">,</span> state<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>ì´ ì½”ë“œì˜ ê²°ê³¼ëŠ” ë¶„ëª…íˆ <code class=\"language-text\">state 0</code>ì´ë‹¤. ë¶„ëª…íˆ ë¦¬ë Œë”ë§ì´ ì¼ì–´ë‚˜ì§€ ì•ŠëŠ”ë‹¤. ë‚´ê°€ ìƒê°í•œ ê²ƒì²˜ëŸ¼ <code class=\"language-text\">setState(0)</code>ì´ í˜¸ì¶œë˜ì–´ë„ <code class=\"language-text\">0</code> => <code class=\"language-text\">0</code>ìœ¼ë¡œ ìƒíƒœê°€ ë³€í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì´ë‹¤, ê·¼ë° ì™œ ì²˜ìŒ ë¬¸ì œì˜ ì½”ë“œëŠ” ë¦¬ë Œë”ë§ì´ ì¼ì–´ë‚˜ëŠ” ê²ƒì¼ê¹Œ?</p>\n<h2 id=\"1-early-bailout-ì¡°ê±´\" style=\"position:relative;\"><a href=\"#1-early-bailout-%EC%A1%B0%EA%B1%B4\" aria-label=\"1 early bailout ì¡°ê±´ permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. early bailout ì¡°ê±´</h2>\n<p><code class=\"language-text\">setState</code>ì—ì„œ ì´ì „ ìƒíƒœì™€ ë‹¤ìŒ ìƒíƒœë¥¼ ë¹„êµí•˜ì—¬ ìƒíƒœê°€ ë³€í•˜ì§€ ì•Šìœ¼ë©´ ë¦¬ë Œë”ë§ì„ í•˜ì§€ ì•Šë„ë¡ ìµœì í™” í•˜ëŠ” ê²ƒì„ <code class=\"language-text\">early bailout</code>ì´ë¼ê³  í•œë‹¤. <code class=\"language-text\">setState</code>ë¥¼ ì •ì˜í•˜ëŠ” ì†ŒìŠ¤ì½”ë“œë¥¼ í™•ì¸í•´ ë³´ì.</p>\n<div\n              class=\"gatsby-code-button-container\"\n              data-toaster-id=\"79353114792019940000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"ğŸ“‹  ì½”ë“œë¥¼ ë³µì‚¬í–ˆìŠµë‹ˆë‹¤.\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`    const alternate = fiber.alternate;\r\n    if (\r\n      fiber.lanes === NoLanes &&\r\n      (alternate === null || alternate.lanes === NoLanes)\r\n    ) {\r\n      const lastRenderedReducer = queue.lastRenderedReducer;\r\n      if (lastRenderedReducer !== null) {\r\n        let prevDispatcher;\r\n        try {\r\n          const currentState: S = (queue.lastRenderedState: any);\r\n          const eagerState = lastRenderedReducer(currentState, action);\r\n          update.hasEagerState = true;\r\n          update.eagerState = eagerState;\r\n          if (is(eagerState, currentState)) {\r\n            enqueueConcurrentHookUpdateAndEagerlyBailout(fiber, queue, update);\r\n            return;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    const root = enqueueConcurrentHookUpdate(fiber, queue, update, lane);`, `79353114792019940000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"\"\n              >\n                copy<svg stroke=\"currentColor\" fill=\"none\" stroke-width=\"2\" viewBox=\"0 0 24 24\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"h-4 w-4\" height=\"1em\" width=\"1em\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2\"></path><rect x=\"8\" y=\"2\" width=\"8\" height=\"4\" rx=\"1\" ry=\"1\"></rect></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\">    <span class=\"token keyword\">const</span> alternate <span class=\"token operator\">=</span> fiber<span class=\"token punctuation\">.</span>alternate<span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>\r\n      fiber<span class=\"token punctuation\">.</span>lanes <span class=\"token operator\">===</span> NoLanes <span class=\"token operator\">&amp;&amp;</span>\r\n      <span class=\"token punctuation\">(</span>alternate <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">||</span> alternate<span class=\"token punctuation\">.</span>lanes <span class=\"token operator\">===</span> NoLanes<span class=\"token punctuation\">)</span>\r\n    <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n      <span class=\"token keyword\">const</span> lastRenderedReducer <span class=\"token operator\">=</span> queue<span class=\"token punctuation\">.</span>lastRenderedReducer<span class=\"token punctuation\">;</span>\r\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>lastRenderedReducer <span class=\"token operator\">!==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">let</span> prevDispatcher<span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\r\n          <span class=\"token keyword\">const</span> currentState<span class=\"token operator\">:</span> <span class=\"token constant\">S</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>queue<span class=\"token punctuation\">.</span>lastRenderedState<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n          <span class=\"token keyword\">const</span> eagerState <span class=\"token operator\">=</span> <span class=\"token function\">lastRenderedReducer</span><span class=\"token punctuation\">(</span>currentState<span class=\"token punctuation\">,</span> action<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n          update<span class=\"token punctuation\">.</span>hasEagerState <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\r\n          update<span class=\"token punctuation\">.</span>eagerState <span class=\"token operator\">=</span> eagerState<span class=\"token punctuation\">;</span>\r\n          <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">is</span><span class=\"token punctuation\">(</span>eagerState<span class=\"token punctuation\">,</span> currentState<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token function\">enqueueConcurrentHookUpdateAndEagerlyBailout</span><span class=\"token punctuation\">(</span>fiber<span class=\"token punctuation\">,</span> queue<span class=\"token punctuation\">,</span> update<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\r\n          <span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">}</span>\r\n      <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> <span class=\"token function\">enqueueConcurrentHookUpdate</span><span class=\"token punctuation\">(</span>fiber<span class=\"token punctuation\">,</span> queue<span class=\"token punctuation\">,</span> update<span class=\"token punctuation\">,</span> lane<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>ìœ„ ì½”ë“œì—ì„œ</p>\n<div\n              class=\"gatsby-code-button-container\"\n              data-toaster-id=\"21128783509116666000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"ğŸ“‹  ì½”ë“œë¥¼ ë³µì‚¬í–ˆìŠµë‹ˆë‹¤.\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`if (is(eagerState, currentState)) {\r\n  enqueueConcurrentHookUpdateAndEagerlyBailout(fiber, queue, update);\r\n  return;\r\n}`, `21128783509116666000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"\"\n              >\n                copy<svg stroke=\"currentColor\" fill=\"none\" stroke-width=\"2\" viewBox=\"0 0 24 24\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"h-4 w-4\" height=\"1em\" width=\"1em\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2\"></path><rect x=\"8\" y=\"2\" width=\"8\" height=\"4\" rx=\"1\" ry=\"1\"></rect></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">is</span><span class=\"token punctuation\">(</span>eagerState<span class=\"token punctuation\">,</span> currentState<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token function\">enqueueConcurrentHookUpdateAndEagerlyBailout</span><span class=\"token punctuation\">(</span>fiber<span class=\"token punctuation\">,</span> queue<span class=\"token punctuation\">,</span> update<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ì´ ë¶€ë¶„ì´ <code class=\"language-text\">early bailout</code>ì„ í•˜ëŠ” ë¶€ë¶„ì´ë‹¤. ì´ì „ ìƒíƒœì™€ ë‹¤ìŒ ìƒíƒœë¥¼ ë¹„êµí•˜ì—¬ ìƒíƒœê°€ ë³€í•˜ì§€ ì•Šìœ¼ë©´ <code class=\"language-text\">return</code>í•˜ì—¬ ë¦¬ë Œë”ë§ì„ í•˜ì§€ ì•Šë„ë¡ í•œë‹¤. ë§Œì•½ <code class=\"language-text\">early bailout</code>ì´ ë°œìƒí•˜ì§€ ì•Šìœ¼ë©´ <code class=\"language-text\">enqueueConcurrentHookUpdate</code>ë¥¼ í˜¸ì¶œí•˜ì—¬ ë¦¬ë Œë”ë§ì„ ì§„í–‰í•œë‹¤.</p>\n<p>ì´ ë¶€ë¶„ì´ ì‹¤í–‰ë˜ê¸° ìœ„í•´ ë˜ ë‹¤ë¥¸ ì¡°ê±´ë¬¸ì´ ìˆëŠ”ë° ê·¸ê²ƒì´</p>\n<div\n              class=\"gatsby-code-button-container\"\n              data-toaster-id=\"92876292063960200000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"ğŸ“‹  ì½”ë“œë¥¼ ë³µì‚¬í–ˆìŠµë‹ˆë‹¤.\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`if (\r\n      fiber.lanes === NoLanes &&\r\n      (alternate === null || alternate.lanes === NoLanes)\r\n    ) { \r\n      ...\r\n    }`, `92876292063960200000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"\"\n              >\n                copy<svg stroke=\"currentColor\" fill=\"none\" stroke-width=\"2\" viewBox=\"0 0 24 24\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"h-4 w-4\" height=\"1em\" width=\"1em\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2\"></path><rect x=\"8\" y=\"2\" width=\"8\" height=\"4\" rx=\"1\" ry=\"1\"></rect></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>\r\n      fiber<span class=\"token punctuation\">.</span>lanes <span class=\"token operator\">===</span> NoLanes <span class=\"token operator\">&amp;&amp;</span>\r\n      <span class=\"token punctuation\">(</span>alternate <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">||</span> alternate<span class=\"token punctuation\">.</span>lanes <span class=\"token operator\">===</span> NoLanes<span class=\"token punctuation\">)</span>\r\n    <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> \r\n      <span class=\"token operator\">...</span>\r\n    <span class=\"token punctuation\">}</span></code></pre></div>\n<p>ì´ ë¶€ë¶„ì´ë‹¤.\r\n<code class=\"language-text\">early bailout</code>ì´ ë°œìƒí•˜ê¸° ìœ„í•œ ì¡°ê±´ì„ ì •ë¦¬í•˜ë©´</p>\n<ol>\n<li><code class=\"language-text\">fiber.lanes === NoLanes</code></li>\n<li><code class=\"language-text\">alternate === null || alternate.lanes === NoLanes</code></li>\n<li><code class=\"language-text\">is(eagerState, currentState)</code></li>\n</ol>\n<p>ì´ë ‡ê²Œ 3ê°€ì§€ ì¡°ê±´ì´ ëª¨ë‘ ë§Œì¡±í•´ì•¼ <code class=\"language-text\">early bailout</code>ì´ ë°œìƒí•œë‹¤.<br>\n<code class=\"language-text\">fiber</code>,<code class=\"language-text\">alternate</code>ì™€ <code class=\"language-text\">lanes</code>, <code class=\"language-text\">NoLanes</code>ì€ ë¬´ì—‡ì¸ì§€ ì•Œì•„ë³´ì.</p>\n<h2 id=\"2-virtual-dom\" style=\"position:relative;\"><a href=\"#2-virtual-dom\" aria-label=\"2 virtual dom permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. Virtual DOM</h2>\n<p><code class=\"language-text\">fiber, alternate, lanes, NoLanes</code> ëª¨ë‘ <code class=\"language-text\">Virtual DOM</code>ì˜ êµ¬ì¡°ì™€ ê´€ë ¨ìˆëŠ” ìš©ì–´ì´ë‹¤.</p>\n<h3 id=\"1-virtual-domì˜-êµ¬ì¡°\" style=\"position:relative;\"><a href=\"#1-virtual-dom%EC%9D%98-%EA%B5%AC%EC%A1%B0\" aria-label=\"1 virtual domì˜ êµ¬ì¡° permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>(1) Virtual DOMì˜ êµ¬ì¡°</h3>\n<p>ìœ„ ì½”ë“œì—ì„œ <code class=\"language-text\">fiber</code>ë€ <code class=\"language-text\">Virtual DOM</code>ì„ ì´ë£¨ëŠ” ê° ë…¸ë“œë¥¼ ì§€ì¹­í•œë‹¤, ë˜í•œ <code class=\"language-text\">Virtual DOM</code>ì€ ë”ë¸” ë²„í¼ë§ êµ¬ì¡°ë¡œ 2ê°€ì§€ì˜ íŠ¸ë¦¬ê°€ ì¡´ì¬í•˜ëŠ”ë°, <code class=\"language-text\">current V DOM</code>ê³¼ <code class=\"language-text\">workInProgress V DOM</code>ì´ë‹¤.</p>\n<ul>\n<li><code class=\"language-text\">current V DOM</code> : ì‹¤ì œ DOMì— ë§ˆìš´íŠ¸ ëœ <code class=\"language-text\">fiber</code> ë…¸ë“œë“¤ë¡œ ì´ë£¨ì–´ì§„ íŠ¸ë¦¬ì´ë‹¤.</li>\n<li><code class=\"language-text\">workInProgress V DOM</code> : <code class=\"language-text\">render phase</code>ì—ì„œ ì‘ì—… ì¤‘ì¸ <code class=\"language-text\">fiber</code>ë…¸ë“œ íŠ¸ë¦¬ì´ë‹¤.</li>\n</ul>\n<p>ê·¸ë¦¬ê³  <code class=\"language-text\">workInProgress V DOM</code>ì€ <code class=\"language-text\">current V DOM</code>ì„ ë³µì‚¬í•˜ì—¬ ë§Œë“¤ì–´ ì§€ë©° ì´ë•Œ <code class=\"language-text\">alternate</code>ë¼ëŠ” í‚¤ë¡œ ì„œë¡œë¥¼ ì°¸ì¡°í•˜ê²Œ ëœë‹¤.</p>\n<h3 id=\"2-render-phase-commit-phase\" style=\"position:relative;\"><a href=\"#2-render-phase-commit-phase\" aria-label=\"2 render phase commit phase permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>(2) render phase, commit phase</h3>\n<p><code class=\"language-text\">render phase</code>ëŠ” ì¬ì¡°ì •í•˜ëŠ” ë‹¨ê³„ì´ë‹¤.<br>\n2ê°œì˜ <code class=\"language-text\">V DOM</code>ì„ ë¹„êµí•˜ë©° ìˆ˜ì • ì‚¬í•­ì—ëŒ€í•´ <code class=\"language-text\">DOM</code>ì— ì ìš©í•˜ê¸° ìœ„í•œ <code class=\"language-text\">WORK</code>ë¥¼ ìŠ¤ì¼€ì¤„ëŸ¬ì— ë“±ë¡í•œë‹¤.</p>\n<p><code class=\"language-text\">commit phase</code>ëŠ” <code class=\"language-text\">workInProgress V DOM</code>ì„ ì‹¤ì œ DOMì— ë°˜ì˜í•˜ëŠ” ë‹¨ê³„ì´ë‹¤. ë˜í•œ ì´ëŸ¬í•œ DOM ì¡°ì‘ê³¼ <code class=\"language-text\">useEffect</code>ì™€ ê°™ì€ ë¼ì´í”„ì‚¬ì´í´ì„ ì‹¤í–‰í•œë‹¤.<br>\nì´ëŸ¬í•œ ë°˜ì˜ì´ ëª¨ë‘ ëë‚˜ë©´ ë¸Œë¼ìš°ì €ê°€ DOMì„ ê¸°ë°˜ìœ¼ë¡œ í™”ë©´ì„ ê·¸ë¦¬ê²Œ ëœë‹¤.</p>\n<h3 id=\"3-lanes\" style=\"position:relative;\"><a href=\"#3-lanes\" aria-label=\"3 lanes permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>(3) Lanes</h3>\n<p><code class=\"language-text\">lanes</code>ë€ ë‹¤ì–‘í•œ ì´ë²¤íŠ¸ì—ëŒ€í•œ ì—…ë°ì´íŠ¸ì˜ ìš°ì„  ìˆœìœ„ë¥¼ ê´€ë¦¬í•˜ëŠ” ë° ì‚¬ìš©ë˜ëŠ” ê°œë…ì´ë‹¤.<br>\nê° ì—…ë°ì´íŠ¸ëŠ” ë‹¤ë¥¸ <code class=\"language-text\">Lane</code>ì— í• ë‹¹ë˜ë©°, ì´ëŠ” Reactê°€ ì–´ë–¤ ì—…ë°ì´íŠ¸ë¥¼ ë¨¼ì € ì²˜ë¦¬í• ì§€ ê²°ì •í•˜ëŠ” ë° ì‚¬ìš©ëœë‹¤. <code class=\"language-text\">NoLanes</code>ëŠ” <code class=\"language-text\">Lane</code>ì´ í• ë‹¹ë˜ì§€ ì•Šì€ ìƒíƒœ ì¦‰, ì—…ë°ì´íŠ¸í•  ë‚´ìš©ì´ ì—†ëŠ” ìƒíƒœë¥¼ ì˜ë¯¸í•œë‹¤.</p>\n<blockquote>\n<p>ì˜ˆë¥¼ë“¤ì–´ ì‚¬ìš©ìì˜ ìƒí˜¸ ì‘ìš© ì´ë²¤íŠ¸ëŠ” ê°€ì¥ ë†’ì€ ìš°ì„  ìˆœìœ„ë¥¼ ê°€ì§€ëŠ” <code class=\"language-text\">Lane</code>ì— í• ë‹¹ ëœë‹¤.</p>\n</blockquote>\n<h3 id=\"4-ì •ë¦¬\" style=\"position:relative;\"><a href=\"#4-%EC%A0%95%EB%A6%AC\" aria-label=\"4 ì •ë¦¬ permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>(4) ì •ë¦¬</h3>\n<p><img src=\"https://github.com/Jeongseulho/sh-snippets/assets/110578739/c473870d-8c1b-4183-be09-9a47964f16b2\" alt=\"image\"><br>\nìœ„ ì‚¬ì§„ì—ì„œ <code class=\"language-text\">Root Node</code>ì™€ ì—°ê²°ë˜ì–´ ìˆëŠ” <code class=\"language-text\">tree</code>ê°€ <code class=\"language-text\">current V DOM</code>ì´ ë˜ëŠ” ê²ƒì´ë‹¤.</p>\n<p><code class=\"language-text\">render phase</code>ì—ì„œ <code class=\"language-text\">workInProgress V DOM</code>ì—ì„œ ì—…ë°ì´íŠ¸ê°€ ì¼ì–´ë‚˜ë©° ì—…ë°ì´íŠ¸ê°€ ì™„ë£Œë˜ë©´ <code class=\"language-text\">commit phase</code>ê°€ ì§„í–‰ë˜ë©° <code class=\"language-text\">Root Node</code>ê°€ <code class=\"language-text\">workInProgress V DOM</code>ê³¼ ì—°ê²°ëœë‹¤.<br>\nì´ë ‡ê²Œ ì—°ê²°ëœ ìˆœê°„ <code class=\"language-text\">workInProgress V DOM</code>ì€ <code class=\"language-text\">current V DOM</code>ë¡œ ë³€ê²½ë˜ëŠ” ê²ƒì´ë‹¤.</p>\n<ul>\n<li>\n<p>fiber</p>\n<ul>\n<li><code class=\"language-text\">Virtual DOM</code>ì„ ì´ë£¨ëŠ” ê° ë…¸ë“œ</li>\n<li><code class=\"language-text\">alternate, lanes</code>ì™€ ê°™ì€ ì—¬ëŸ¬ ì†ì„±ì„ ê°€ì§€ê³  ìˆë‹¤.</li>\n</ul>\n</li>\n<li>\n<p>alternate</p>\n<ul>\n<li><code class=\"language-text\">workInProgress V DOM</code>ê³¼ <code class=\"language-text\">current V DOM</code>ì„ ì„œë¡œ ì°¸ì¡°í•˜ëŠ” í‚¤</li>\n</ul>\n</li>\n<li>\n<p>lanes</p>\n<ul>\n<li>ë‹¤ì–‘í•œ ì—…ë°ì´íŠ¸ì˜ ìš°ì„  ìˆœìœ„ë¥¼ ê´€ë¦¬í•˜ëŠ” ê°œë…</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"3-lanes-ì½”ë“œ-í•´ì„\" style=\"position:relative;\"><a href=\"#3-lanes-%EC%BD%94%EB%93%9C-%ED%95%B4%EC%84%9D\" aria-label=\"3 lanes ì½”ë“œ í•´ì„ permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. lanes ì½”ë“œ í•´ì„</h2>\n<p>ìœ„ ê°œë…ì„ ê¸°ë°˜ìœ¼ë¡œ ì¡°ê±´ë¬¸ì„ í•´ì„í•´ë³´ë©´</p>\n<ol>\n<li>\n<p><code class=\"language-text\">fiber.lanes === NoLanes</code>ì´ë€ í˜„ì¬ <code class=\"language-text\">fiber</code>ì—ì„œ ì—…ë°ì´íŠ¸í•  ë‚´ìš©ì´ ì—†ë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤.</p>\n</li>\n<li>\n<p><code class=\"language-text\">alternate === null || alternate.lanes === NoLanes</code>ì´ë€ í˜„ì¬ <code class=\"language-text\">fiber</code>ì˜ <code class=\"language-text\">alternate</code> ì¦‰, <code class=\"language-text\">workInProgress V DOM</code>ì˜ ëŒ€ì‘í•˜ëŠ” <code class=\"language-text\">fiber</code>ê°€ ì—†ê±°ë‚˜ <code class=\"language-text\">workInProgress V DOM</code>ì˜ ëŒ€ì‘í•˜ëŠ” <code class=\"language-text\">fiber</code>ì—ì„œ ì—…ë°ì´íŠ¸í•  ë‚´ìš©ì´ ì—†ë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤.</p>\n</li>\n</ol>\n<p><code class=\"language-text\">early bailout</code>ì´ ë°œìƒí•˜ë ¤ë©´ ì´ì „ ìƒíƒœì™€ ë³€ê²½ëœ ìƒíƒœë¥¼ ë¹„êµí•˜ê¸° ì „ì— ë¨¼ì € 2ê°€ì§€ ì¡°ê±´ë¬¸ì„ ëª¨ë‘ ë§Œì¡±í•´ì•¼ í•œë‹¤.</p>\n<p>ê·¸ëŸ¬ë©´ <code class=\"language-text\">lanes</code>ì€ ì–¸ì œ <code class=\"language-text\">NoLanes</code>ì´ ë˜ê³  ì–¸ì œ <code class=\"language-text\">NoLanes</code>ê°€ ì•„ë‹Œì§€ ì•Œì•„ë³´ì.</p>\n<h3 id=\"1-lanesì˜-dirty\" style=\"position:relative;\"><a href=\"#1-lanes%EC%9D%98-dirty\" aria-label=\"1 lanesì˜ dirty permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>(1) <code class=\"language-text\">lanes</code>ì˜ <code class=\"language-text\">dirty</code></h3>\n<p><code class=\"language-text\">lanes</code>ì— ì–´ë–¤ ì—…ë°ì´íŠ¸ê°€ í• ë‹¹ë˜ë©´ <code class=\"language-text\">lanes</code>ëŠ” <code class=\"language-text\">dirty</code>ê°€ ëœë‹¤. ì¦‰, <code class=\"language-text\">NoLanes</code>ê°€ ì•„ë‹Œ ìƒíƒœê°€ ëœë‹¤.<br>\nì´ë ‡ê²Œ <code class=\"language-text\">dirty</code>í•˜ê²Œ ë˜ëŠ” ìˆœê°„ì€ <code class=\"language-text\">enqueueUpdate</code>ê°€ í˜¸ì¶œë˜ëŠ” ìˆœê°„ì´ë‹¤.<br>\nìœ„ ì½”ë“œì—ì„œ <code class=\"language-text\">early bailout</code>ì´ ë°œìƒí•˜ì§€ ì•Šì„ë•Œ</p>\n<div\n              class=\"gatsby-code-button-container\"\n              data-toaster-id=\"21063410408156025000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"ğŸ“‹  ì½”ë“œë¥¼ ë³µì‚¬í–ˆìŠµë‹ˆë‹¤.\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`const root = enqueueConcurrentHookUpdate(fiber, queue, update, lane);`, `21063410408156025000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"\"\n              >\n                copy<svg stroke=\"currentColor\" fill=\"none\" stroke-width=\"2\" viewBox=\"0 0 24 24\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"h-4 w-4\" height=\"1em\" width=\"1em\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2\"></path><rect x=\"8\" y=\"2\" width=\"8\" height=\"4\" rx=\"1\" ry=\"1\"></rect></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> <span class=\"token function\">enqueueConcurrentHookUpdate</span><span class=\"token punctuation\">(</span>fiber<span class=\"token punctuation\">,</span> queue<span class=\"token punctuation\">,</span> update<span class=\"token punctuation\">,</span> lane<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>ì´ í•¨ìˆ˜ê°€ ì‹¤í–‰ëœë‹¤. ì´ í•¨ìˆ˜ëŠ”</p>\n<div\n              class=\"gatsby-code-button-container\"\n              data-toaster-id=\"91574039415524670000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"ğŸ“‹  ì½”ë“œë¥¼ ë³µì‚¬í–ˆìŠµë‹ˆë‹¤.\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`export function enqueueConcurrentHookUpdate<S, A>(\r\n  fiber: Fiber,\r\n  queue: HookQueue<S, A>,\r\n  update: HookUpdate<S, A>,\r\n  lane: Lane,\r\n): FiberRoot | null {\r\n\r\n  ...\r\n\r\n  enqueueUpdate(fiber, concurrentQueue, concurrentUpdate, lane);\r\n\r\n  ...\r\n\r\n}`, `91574039415524670000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"\"\n              >\n                copy<svg stroke=\"currentColor\" fill=\"none\" stroke-width=\"2\" viewBox=\"0 0 24 24\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"h-4 w-4\" height=\"1em\" width=\"1em\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2\"></path><rect x=\"8\" y=\"2\" width=\"8\" height=\"4\" rx=\"1\" ry=\"1\"></rect></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token generic-function\"><span class=\"token function\">enqueueConcurrentHookUpdate</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token constant\">S</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">A</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>\r\n  fiber<span class=\"token operator\">:</span> Fiber<span class=\"token punctuation\">,</span>\r\n  queue<span class=\"token operator\">:</span> HookQueue<span class=\"token operator\">&lt;</span><span class=\"token constant\">S</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">A</span><span class=\"token operator\">></span><span class=\"token punctuation\">,</span>\r\n  update<span class=\"token operator\">:</span> HookUpdate<span class=\"token operator\">&lt;</span><span class=\"token constant\">S</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">A</span><span class=\"token operator\">></span><span class=\"token punctuation\">,</span>\r\n  lane<span class=\"token operator\">:</span> Lane<span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> FiberRoot <span class=\"token operator\">|</span> <span class=\"token keyword\">null</span> <span class=\"token punctuation\">{</span>\r\n\r\n  <span class=\"token operator\">...</span>\r\n\r\n  <span class=\"token function\">enqueueUpdate</span><span class=\"token punctuation\">(</span>fiber<span class=\"token punctuation\">,</span> concurrentQueue<span class=\"token punctuation\">,</span> concurrentUpdate<span class=\"token punctuation\">,</span> lane<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token operator\">...</span>\r\n\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ì´ë ‡ê²Œ ì •ì˜ ë˜ë©° ì—¬ê¸°ì„œ <code class=\"language-text\">enqueueUpdate</code>ê°€ í˜¸ì¶œëœë‹¤.</p>\n<div\n              class=\"gatsby-code-button-container\"\n              data-toaster-id=\"78285456817079370000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"ğŸ“‹  ì½”ë“œë¥¼ ë³µì‚¬í–ˆìŠµë‹ˆë‹¤.\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`function enqueueUpdate(\r\n  fiber: Fiber,\r\n  queue: ConcurrentQueue | null,\r\n  update: ConcurrentUpdate | null,\r\n  lane: Lane,\r\n) {\r\n\r\n  ...\r\n\r\n  fiber.lanes = mergeLanes(fiber.lanes, lane);\r\n  const alternate = fiber.alternate;\r\n  if (alternate !== null) {\r\n    alternate.lanes = mergeLanes(alternate.lanes, lane);\r\n  }\r\n}`, `78285456817079370000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"\"\n              >\n                copy<svg stroke=\"currentColor\" fill=\"none\" stroke-width=\"2\" viewBox=\"0 0 24 24\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"h-4 w-4\" height=\"1em\" width=\"1em\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2\"></path><rect x=\"8\" y=\"2\" width=\"8\" height=\"4\" rx=\"1\" ry=\"1\"></rect></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">enqueueUpdate</span><span class=\"token punctuation\">(</span>\r\n  fiber<span class=\"token operator\">:</span> Fiber<span class=\"token punctuation\">,</span>\r\n  queue<span class=\"token operator\">:</span> ConcurrentQueue <span class=\"token operator\">|</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\r\n  update<span class=\"token operator\">:</span> ConcurrentUpdate <span class=\"token operator\">|</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\r\n  lane<span class=\"token operator\">:</span> Lane<span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n\r\n  <span class=\"token operator\">...</span>\r\n\r\n  fiber<span class=\"token punctuation\">.</span>lanes <span class=\"token operator\">=</span> <span class=\"token function\">mergeLanes</span><span class=\"token punctuation\">(</span>fiber<span class=\"token punctuation\">.</span>lanes<span class=\"token punctuation\">,</span> lane<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">const</span> alternate <span class=\"token operator\">=</span> fiber<span class=\"token punctuation\">.</span>alternate<span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>alternate <span class=\"token operator\">!==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    alternate<span class=\"token punctuation\">.</span>lanes <span class=\"token operator\">=</span> <span class=\"token function\">mergeLanes</span><span class=\"token punctuation\">(</span>alternate<span class=\"token punctuation\">.</span>lanes<span class=\"token punctuation\">,</span> lane<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ì´ ì½”ë“œë¥¼ ë³´ë©´ <code class=\"language-text\">fiber</code>ì™€ <code class=\"language-text\">alternate</code>ì˜ <code class=\"language-text\">lanes</code>ëª¨ë‘ <code class=\"language-text\">dirty</code>í•˜ê²Œ ëœë‹¤.</p>\n<p>ì¦‰, <code class=\"language-text\">early bailout</code>ì´ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ <code class=\"language-text\">setState</code>í˜¸ì¶œ ì‹œ <code class=\"language-text\">fiber</code>ì™€ <code class=\"language-text\">alternate</code>ì˜ <code class=\"language-text\">lanes</code>ëª¨ë‘ <code class=\"language-text\">dirty</code>í•˜ê²Œ ëœë‹¤.</p>\n<h3 id=\"2-lanesì˜-clean\" style=\"position:relative;\"><a href=\"#2-lanes%EC%9D%98-clean\" aria-label=\"2 lanesì˜ clean permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>(2) <code class=\"language-text\">lanes</code>ì˜ <code class=\"language-text\">clean</code></h3>\n<p><code class=\"language-text\">lanes</code>ê°€ <code class=\"language-text\">NoLanes</code>ê°€ ë˜ëŠ” ì½”ë“œëŠ”</p>\n<div\n              class=\"gatsby-code-button-container\"\n              data-toaster-id=\"55880304287978880000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"ğŸ“‹  ì½”ë“œë¥¼ ë³µì‚¬í–ˆìŠµë‹ˆë‹¤.\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`function beginWork(\r\n  current: Fiber | null,\r\n  workInProgress: Fiber,\r\n  renderLanes: Lanes,\r\n): Fiber | null {\r\n  ...\r\n  workInProgress.lanes = NoLanes;\r\n  ...\r\n}`, `55880304287978880000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"\"\n              >\n                copy<svg stroke=\"currentColor\" fill=\"none\" stroke-width=\"2\" viewBox=\"0 0 24 24\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"h-4 w-4\" height=\"1em\" width=\"1em\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2\"></path><rect x=\"8\" y=\"2\" width=\"8\" height=\"4\" rx=\"1\" ry=\"1\"></rect></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">beginWork</span><span class=\"token punctuation\">(</span>\r\n  current<span class=\"token operator\">:</span> Fiber <span class=\"token operator\">|</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\r\n  workInProgress<span class=\"token operator\">:</span> Fiber<span class=\"token punctuation\">,</span>\r\n  renderLanes<span class=\"token operator\">:</span> Lanes<span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Fiber <span class=\"token operator\">|</span> <span class=\"token keyword\">null</span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token operator\">...</span>\r\n  workInProgress<span class=\"token punctuation\">.</span>lanes <span class=\"token operator\">=</span> NoLanes<span class=\"token punctuation\">;</span>\r\n  <span class=\"token operator\">...</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ì´ ì½”ë“œì´ë‹¤, <code class=\"language-text\">beginWork</code>ë¼ëŠ” ì‘ì—…ì„ í•˜ê¸° ì „ì— í•´ë‹¹ <code class=\"language-text\">workInProgress</code>íŠ¸ë¦¬ì˜ <code class=\"language-text\">fiber</code>ì—ëŒ€í•œ <code class=\"language-text\">lanes</code>ë¥¼ <code class=\"language-text\">NoLanes</code>ë¡œ ì´ˆê¸°í™”í•œë‹¤.<br>\nì—¬ê¸°ì„œ ìœ„ì—ì„œ ì–¸ê¸‰í•˜ë˜ í˜„ì¬ <code class=\"language-text\">fiber</code>ëŠ” <code class=\"language-text\">lanes</code>ê°€ <code class=\"language-text\">dirty</code>ìƒíƒœê°€ ë˜ë©´ì„œ <code class=\"language-text\">workInProgress</code>ê°€ ëœ ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤.</p>\n<blockquote>\n<p><code class=\"language-text\">beginWork</code>ëŠ” <code class=\"language-text\">render phase</code>ì—ì„œ <code class=\"language-text\">workInProgress V DOM</code>ì„ ë§Œë“¤ê±°ë‚˜ ìˆ˜ì •í•˜ëŠ” ì‘ì—…ì„ í•˜ëŠ” í•¨ìˆ˜ì´ë‹¤.</p>\n</blockquote>\n<p><img src=\"https://d2.naver.com/content/images/2023/07/14.gif\" alt=\"image\"></p>\n<p>ì¦‰, <code class=\"language-text\">render phase</code>ì—ì„œ <code class=\"language-text\">workInProgress</code>ì˜ <code class=\"language-text\">lanes</code>ëŠ” <code class=\"language-text\">clean</code>í•˜ê²Œ ëœë‹¤.</p>\n<h3 id=\"3-ì •ë¦¬\" style=\"position:relative;\"><a href=\"#3-%EC%A0%95%EB%A6%AC\" aria-label=\"3 ì •ë¦¬ permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>(3) ì •ë¦¬</h3>\n<p>ìœ„ì˜ ë‚´ìš©ì„ ì •ë¦¬í•˜ë©´</p>\n<ol>\n<li><code class=\"language-text\">setState</code> í˜¸ì¶œ ì‹œ <code class=\"language-text\">fiber</code>ì™€ <code class=\"language-text\">alternate</code>ì˜ <code class=\"language-text\">lanes</code>ê°€ <code class=\"language-text\">dirty</code>í•˜ê²Œ ëœë‹¤.(ë‹¨, <code class=\"language-text\">early bailout</code>ì´ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤ë©´)</li>\n<li><code class=\"language-text\">setState</code> í˜¸ì¶œ ì´í›„ <code class=\"language-text\">render phase</code>ì—ì„œ <code class=\"language-text\">workInProgress</code>(1ë²ˆì—ì„œì˜ <code class=\"language-text\">fiber</code>)ì˜ <code class=\"language-text\">lanes</code>ê°€ <code class=\"language-text\">clean</code>í•˜ê²Œ ëœë‹¤.</li>\n</ol>\n<p>ì´ì œ ì²˜ìŒ ì˜ë¬¸ì´ ìƒê¸´ ì½”ë“œë¥¼ í•´ì„í•´ë³´ì.</p>\n<h2 id=\"3-ë¬¸ì œ-ì½”ë“œ-í•´ì„\" style=\"position:relative;\"><a href=\"#3-%EB%AC%B8%EC%A0%9C-%EC%BD%94%EB%93%9C-%ED%95%B4%EC%84%9D\" aria-label=\"3 ë¬¸ì œ ì½”ë“œ í•´ì„ permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. ë¬¸ì œ ì½”ë“œ í•´ì„</h2>\n<h3 id=\"1-early-bailoutì´-ë°œìƒí•˜ëŠ”-ì½”ë“œ\" style=\"position:relative;\"><a href=\"#1-early-bailout%EC%9D%B4-%EB%B0%9C%EC%83%9D%ED%95%98%EB%8A%94-%EC%BD%94%EB%93%9C\" aria-label=\"1 early bailoutì´ ë°œìƒí•˜ëŠ” ì½”ë“œ permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>(1) early bailoutì´ ë°œìƒí•˜ëŠ” ì½”ë“œ</h3>\n<div\n              class=\"gatsby-code-button-container\"\n              data-toaster-id=\"92625280212516040000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"ğŸ“‹  ì½”ë“œë¥¼ ë³µì‚¬í–ˆìŠµë‹ˆë‹¤.\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`  const [state, setState] = useState(0);\r\n  console.log('state', state);\r\n\r\n  useEffect(() => {\r\n    setState(0);\r\n  }, [state]);`, `92625280212516040000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"\"\n              >\n                copy<svg stroke=\"currentColor\" fill=\"none\" stroke-width=\"2\" viewBox=\"0 0 24 24\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"h-4 w-4\" height=\"1em\" width=\"1em\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2\"></path><rect x=\"8\" y=\"2\" width=\"8\" height=\"4\" rx=\"1\" ry=\"1\"></rect></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\">  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">,</span> setState<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'state'</span><span class=\"token punctuation\">,</span> state<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>ì²˜ìŒ stateê°€ 0ì´ê³  ë§ˆìš´íŠ¸ ì´í›„ <code class=\"language-text\">setState(0)</code>ì‹¤í–‰ í•˜ë©´ ì´ ì‹œì ì—ì„œ</p>\n<ol>\n<li>ì²« ë Œë”ë§ì´ë¯€ë¡œ <code class=\"language-text\">fiber.lanes === NoLanes</code>ì€ <code class=\"language-text\">true</code>ì´ë‹¤.</li>\n<li><code class=\"language-text\">workInProgress V DOM</code>ì€ ì—†ìœ¼ë¯€ë¡œ <code class=\"language-text\">alternate === null</code>ì€ <code class=\"language-text\">true</code>ì´ë‹¤.</li>\n<li><code class=\"language-text\">is(eagerState, currentState)</code>ì€ <code class=\"language-text\">true</code>ì´ë‹¤.</li>\n</ol>\n<p>ì¦‰, <code class=\"language-text\">early bailout</code>ì´ ë°œìƒí•œë‹¤.</p>\n<blockquote>\n<p><code class=\"language-text\">workInProgress V DOM</code>ì€ ìµœì†Œí•œ 1ë²ˆ ì´ìƒì˜ ì—…ë°ì´íŠ¸ê°€ ë°œìƒí•˜ì—¬ì•¼ ìƒì„±ëœë‹¤.<br>\nì—…ë°ì´íŠ¸ê°€ ë°œìƒë˜ì–´ <code class=\"language-text\">workInProgress V DOM</code>ì´ í•„ìš”í•œ ìˆœê°„ì—ì•¼ <code class=\"language-text\">current V DOM</code>ì„ ë³µì‚¬í•œ <code class=\"language-text\">workInProgress V DOM</code>ì´ ìƒì„±ë˜ê³  ì—…ë°ì´íŠ¸ê°€ ì§„í–‰ëœë‹¤.</p>\n</blockquote>\n<h3 id=\"2-early-bailoutì´-ë°œìƒí•˜ì§€-ì•ŠëŠ”-ì½”ë“œ\" style=\"position:relative;\"><a href=\"#2-early-bailout%EC%9D%B4-%EB%B0%9C%EC%83%9D%ED%95%98%EC%A7%80-%EC%95%8A%EB%8A%94-%EC%BD%94%EB%93%9C\" aria-label=\"2 early bailoutì´ ë°œìƒí•˜ì§€ ì•ŠëŠ” ì½”ë“œ permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>(2) early bailoutì´ ë°œìƒí•˜ì§€ ì•ŠëŠ” ì½”ë“œ</h3>\n<div\n              class=\"gatsby-code-button-container\"\n              data-toaster-id=\"76440914051488890000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"ğŸ“‹  ì½”ë“œë¥¼ ë³µì‚¬í–ˆìŠµë‹ˆë‹¤.\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`  const [state, setState] = useState(0);\r\n  console.log('state', state);\r\n\r\n  useEffect(() => {\r\n    setState(1);\r\n  }, [state]);`, `76440914051488890000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"\"\n              >\n                copy<svg stroke=\"currentColor\" fill=\"none\" stroke-width=\"2\" viewBox=\"0 0 24 24\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"h-4 w-4\" height=\"1em\" width=\"1em\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2\"></path><rect x=\"8\" y=\"2\" width=\"8\" height=\"4\" rx=\"1\" ry=\"1\"></rect></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\">  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">,</span> setState<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'state'</span><span class=\"token punctuation\">,</span> state<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>ì´ ì½”ë“œì˜ ê³¼ì •ì„ 2ê°œì˜ <code class=\"language-text\">V DOM</code>ì„ ê¸°ì¤€ìœ¼ë¡œ ì„¤ëª…í•´ë³´ì.<br>\n2ê°œì˜ <code class=\"language-text\">V DOM</code>ì€ swapì´ ë˜ë©´ì„œ ì—­í• ì´ ë°”ë€ŒëŠ” ê²ƒì´ê¸° ë•Œë¬¸ì— fiber1, fiber2ë¡œ í‘œê¸°í•˜ê² ë‹¤.</p>\n<ol>\n<li>ì²« ë Œë”ë§ ì´í›„\n<ul>\n<li>fiber1 : <code class=\"language-text\">current</code>, <code class=\"language-text\">clean</code></li>\n<li>fiber2 : <code class=\"language-text\">null</code></li>\n</ul>\n</li>\n<li><code class=\"language-text\">setState(1)</code> í˜¸ì¶œ ì´í›„ <code class=\"language-text\">enqueueUpdate</code>ë¡œ ì¸í•´ <code class=\"language-text\">workInProgress</code>ìƒì„± ë° 2ê°œì˜ <code class=\"language-text\">V DOM</code>ì„ ëª¨ë‘ <code class=\"language-text\">dirty</code>ë¡œ\n<ul>\n<li>fiber1 : <code class=\"language-text\">current</code>, <code class=\"language-text\">dirty</code></li>\n<li>fiber2 : <code class=\"language-text\">workInProgress</code>, <code class=\"language-text\">dirty</code></li>\n</ul>\n</li>\n<li><code class=\"language-text\">render phase</code>ì—ì„œ <code class=\"language-text\">beginWork</code>ê°€ í˜¸ì¶œë˜ë©´ì„œ <code class=\"language-text\">workInProgress</code>ë¥¼ <code class=\"language-text\">clean</code>\n<ul>\n<li>fiber1 : <code class=\"language-text\">current</code>, <code class=\"language-text\">dirty</code></li>\n<li>fiber2 : <code class=\"language-text\">workInProgress</code>, <code class=\"language-text\">clean</code></li>\n</ul>\n</li>\n<li><code class=\"language-text\">commit phase</code>ì´í›„ 2ê°œì˜ <code class=\"language-text\">V DOM</code>ì´ swap\n<ul>\n<li>fiber1 : <code class=\"language-text\">workInProgress</code>, <code class=\"language-text\">dirty</code></li>\n<li>fiber2 : <code class=\"language-text\">current</code>, <code class=\"language-text\">clean</code></li>\n</ul>\n</li>\n<li>ì˜ì¡´ì„± ë°°ì—´ì— <code class=\"language-text\">state</code>ë¡œ ì¸í•œ <code class=\"language-text\">setState(1)</code>ì´ í˜¸ì¶œ\n<ul>\n<li>fiber1 : <code class=\"language-text\">workInProgress</code>, <code class=\"language-text\">dirty</code></li>\n<li>fiber2 : <code class=\"language-text\">current</code>, <code class=\"language-text\">dirty</code></li>\n</ul>\n</li>\n<li><code class=\"language-text\">beginWork</code> í˜¸ì¶œ</li>\n</ol>\n<p>5ë²ˆì—ì„œ <code class=\"language-text\">setState(1)</code>ì´ í˜¸ì¶œë˜ì–´ 1 => 1ë¡œ ìƒíƒœê°€ ë³€í•˜ì§€ ì•Šì•˜ì§€ë§Œ <code class=\"language-text\">early bailout</code>ìœ¼ë¡œ ë¹ ì§€ì§€ ì•Šì•˜ê³  6ë²ˆì—ì„œ <code class=\"language-text\">render phase</code>ê°€ ì§„í–‰ë˜ë©´ì„œ ì»´í¬ë„ŒíŠ¸ê°€ ë‹¤ì‹œ ì‹¤í–‰ë˜ëŠ” ê²ƒì´ë‹¤.</p>\n<h2 id=\"4-ë§ˆì¹˜ë©°\" style=\"position:relative;\"><a href=\"#4-%EB%A7%88%EC%B9%98%EB%A9%B0\" aria-label=\"4 ë§ˆì¹˜ë©° permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. ë§ˆì¹˜ë©°</h2>\n<hr>\n<p>êµ‰ì¥íˆ Lowí•œ ë ˆë²¨ì˜ ë‚´ìš©ì´ë¼ ì´í•´í•˜ëŠ”ë° êµ‰ì¥íˆ ì˜¤ë˜ê±¸ë¦¬ê³  ì–´ë ¤ì› ë‹¤.<br>\nì¤‘ìš”í•œ ì ì€ <code class=\"language-text\">state</code>ê°€ ë³€í•˜ì§€ ì•ŠëŠ” <code class=\"language-text\">setState</code> í˜¸ì¶œì—ë„ ë¦¬ë Œë”ë§ ìµœì í™”ê°€ ë³´ì¥ë˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ê²ƒì´ë‹¤.</p>\n<h2 id=\"ì°¸ê³ -ì‚¬ì´íŠ¸\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0-%EC%82%AC%EC%9D%B4%ED%8A%B8\" aria-label=\"ì°¸ê³  ì‚¬ì´íŠ¸ permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì°¸ê³  ì‚¬ì´íŠ¸</h2>\n<p><a href=\"https://jser.dev/2023-06-19-how-does-usestate-work/#52-setstate-with-same-value-might-still-trigger-re-render\" target=\"_blank\" rel=\"nofollow\">JSer.dev</a><br>\n<a href=\"https://d2.naver.com/helloworld/2690975\" target=\"_blank\" rel=\"nofollow\">naver D2</a><br>\n<a href=\"https://www.youtube.com/watch?v=2EbCEluOO9Y&#x26;list=PLpq56DBY9U2B6gAZIbiIami_cLBhpHYCA&#x26;index=3\" target=\"_blank\" rel=\"nofollow\">Boaz youtube</a><br>\n<a href=\"https://bumkeyy.gitbook.io/bumkeyy-code/frontend/a-deep-dive-into-react-fiber-internals\" target=\"_blank\" rel=\"nofollow\">bumkeyy</a>\r\n<a href=\"https://velog.io/@tnghgks/React-Fiber%EC%97%90-%EB%8C%80%ED%95%B4%EC%84%9C\" target=\"_blank\" rel=\"nofollow\">tnghgks</a></p>","tableOfContents":"<ul>\n<li>\n<p><a href=\"#0-%EB%93%A4%EC%96%B4%EA%B0%80%EB%A9%B0\">0. ë“¤ì–´ê°€ë©°</a></p>\n</li>\n<li>\n<p><a href=\"#1-early-bailout-%EC%A1%B0%EA%B1%B4\">1. early bailout ì¡°ê±´</a></p>\n</li>\n<li>\n<p><a href=\"#2-virtual-dom\">2. Virtual DOM</a></p>\n<ul>\n<li><a href=\"#1-virtual-dom%EC%9D%98-%EA%B5%AC%EC%A1%B0\">(1) Virtual DOMì˜ êµ¬ì¡°</a></li>\n<li><a href=\"#2-render-phase-commit-phase\">(2) render phase, commit phase</a></li>\n<li><a href=\"#3-lanes\">(3) Lanes</a></li>\n<li><a href=\"#4-%EC%A0%95%EB%A6%AC\">(4) ì •ë¦¬</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#3-lanes-%EC%BD%94%EB%93%9C-%ED%95%B4%EC%84%9D\">3. lanes ì½”ë“œ í•´ì„</a></p>\n<ul>\n<li><a href=\"#1-lanes%EC%9D%98-dirty\">(1) <code class=\"language-text\">lanes</code>ì˜ <code class=\"language-text\">dirty</code></a></li>\n<li><a href=\"#2-lanes%EC%9D%98-clean\">(2) <code class=\"language-text\">lanes</code>ì˜ <code class=\"language-text\">clean</code></a></li>\n<li><a href=\"#3-%EC%A0%95%EB%A6%AC\">(3) ì •ë¦¬</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#3-%EB%AC%B8%EC%A0%9C-%EC%BD%94%EB%93%9C-%ED%95%B4%EC%84%9D\">3. ë¬¸ì œ ì½”ë“œ í•´ì„</a></p>\n<ul>\n<li><a href=\"#1-early-bailout%EC%9D%B4-%EB%B0%9C%EC%83%9D%ED%95%98%EB%8A%94-%EC%BD%94%EB%93%9C\">(1) early bailoutì´ ë°œìƒí•˜ëŠ” ì½”ë“œ</a></li>\n<li><a href=\"#2-early-bailout%EC%9D%B4-%EB%B0%9C%EC%83%9D%ED%95%98%EC%A7%80-%EC%95%8A%EB%8A%94-%EC%BD%94%EB%93%9C\">(2) early bailoutì´ ë°œìƒí•˜ì§€ ì•ŠëŠ” ì½”ë“œ</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#4-%EB%A7%88%EC%B9%98%EB%A9%B0\">4. ë§ˆì¹˜ë©°</a></p>\n</li>\n<li>\n<p><a href=\"#%EC%B0%B8%EA%B3%A0-%EC%82%AC%EC%9D%B4%ED%8A%B8\">ì°¸ê³  ì‚¬ì´íŠ¸</a></p>\n</li>\n</ul>","frontmatter":{"title":"React early bailout","summary":"Reactì˜ ìƒíƒœ ë³€í™”ì— ë”°ë¥¸ ë Œë”ë§ ìµœì í™”ì¸ early bailoutì˜ ì¡°ê±´ê³¼ ê³¼ì •ì„ ì •ë¦¬","date":"2023ë…„ 11ì›” 14ì¼","tags":["React","state"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACQklEQVR42lWS22sTQRSH865QMJtsstmNCL4UfRAf1FZtBCkYmrRRK6XSQtGEKD4oKLV7r2IVITYYoyXXmZ3dXO2GtiYhzc00jYnVItUX/x3ZXfECh+EMzDeH7zdjIgWZFGQrA800sNCA4JCVgRgNMH2L0QBnoY2TjGOkIDt4fdUaZLLQwAfbC8W+J9WYSDYuva34QGtG2fGBlifV8KSaC8X+6VCJ4BAlKnYODa/kpxK16XT92JOMycrA8Vjt1vv+XG7Xk2qMRcvTcucqbM8oO5Pp5u31gV8dXHjzwYBtnHQ9XX9Q6jPlL1fWKtpkb7oZUAc3UMcHWu7EdkD9PJvpuhN1CwOsLMRZieAQKciUINs4afxd+b766fHW3mh4w4Sz0li0fDPbnc/3gqU9V7TsTTfn87vuRN3BI6eoUKJikJTu6RSVi683XZEtgkcmSpTNNDj8KHHoYcLOSRgNhhZTQ4sp8xIgeISzko1DDl7GWWTnEKVnhrMSzkKHgLTJ58Mlb6w8J9VtHBoNly5HN48/zY6sqr54dWRVHV7JHV1WzobUky8KBk+JWmlpYzSciFXu5Duh5v6J53lvvFrY/ykPfsR7B8+2v651vyd7B8uVfqTzbTJePbIEnLoFaTyVjUOnXhan4pVgru2KbJwJrd/Nt4O5ViDbupas+rMtf6Z5r/BxFtTOvVJxVqJE+S9MCrLhhtGQ4JGdRxbtw0CMgVYWWvQy09DCSAT/2/k/mNQ1nPqVlKA1TlFxGgnraWuZ/4P9gX8BxhA34OcT0WYAAAAASUVORK5CYII="},"images":{"fallback":{"src":"/static/89ef6b85c4f7d4da2503f53338002500/f816e/image.png","srcSet":"/static/89ef6b85c4f7d4da2503f53338002500/0357b/image.png 440w,\n/static/89ef6b85c4f7d4da2503f53338002500/7aeb9/image.png 880w,\n/static/89ef6b85c4f7d4da2503f53338002500/f816e/image.png 1760w","sizes":"(min-width: 1760px) 1760px, 100vw"},"sources":[{"srcSet":"/static/89ef6b85c4f7d4da2503f53338002500/bc572/image.webp 440w,\n/static/89ef6b85c4f7d4da2503f53338002500/ef23a/image.webp 880w,\n/static/89ef6b85c4f7d4da2503f53338002500/31eca/image.webp 1760w","type":"image/webp","sizes":"(min-width: 1760px) 1760px, 100vw"}]},"width":1760,"height":924}},"publicURL":"/static/89ef6b85c4f7d4da2503f53338002500/image.png"}}}}]}},"pageContext":{"slug":"/tech/2023-11-14-React-early-bailout/","previous":{"fields":{"slug":"/tech/2023-10-08-Atomic-íŒ¨í„´-ì ìš©ì—-ì‹¤íŒ¨í•œ-ì´ìœ /"},"frontmatter":{"tags":["React","React íŒ¨í„´"],"update":true,"title":"Atomic íŒ¨í„´ ì ìš©"}},"next":{"fields":{"slug":"/tech/2023-11-21-Mixed-Content/"},"frontmatter":{"tags":["NextJs","https"],"update":true,"title":"Mixed Content"}}}},"staticQueryHashes":[],"slicesMap":{}}