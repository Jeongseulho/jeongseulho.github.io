{"componentChunkName":"component---src-templates-post-template-tsx","path":"/tech/2023-11-14-React-early-bailout/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<h2 id=\"0-들어가며\" style=\"position:relative;\"><a href=\"#0-%EB%93%A4%EC%96%B4%EA%B0%80%EB%A9%B0\" aria-label=\"0 들어가며 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>0. 들어가며</h2>\n<p>우연히 유튜브에서 면접 질문을 보았다. 다음 코드의 콘솔을 맞추는 문제인데</p>\n<div\n              class=\"gatsby-code-button-container\"\n              data-toaster-id=\"63128509690893720000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"📋  코드를 복사했습니다.\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`  const [state, setState] = useState(0);\r\n  console.log('state', state);\r\n\r\n  useEffect(() => {\r\n    setState(1);\r\n  }, [state]);`, `63128509690893720000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"\"\n              >\n                copy<svg stroke=\"currentColor\" fill=\"none\" stroke-width=\"2\" viewBox=\"0 0 24 24\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"h-4 w-4\" height=\"1em\" width=\"1em\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2\"></path><rect x=\"8\" y=\"2\" width=\"8\" height=\"4\" rx=\"1\" ry=\"1\"></rect></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\">  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">,</span> setState<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'state'</span><span class=\"token punctuation\">,</span> state<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>처음 렌더시 <code class=\"language-text\">state 0</code>, 이후 <code class=\"language-text\">setState(1)</code>이 호출되고 다시 렌더시 <code class=\"language-text\">state 1</code>, <code class=\"language-text\">useEffect</code>의 의존성 배열에 <code class=\"language-text\">state</code>가 있으므로 <code class=\"language-text\">setState(1)</code>이 호출 되지만 <code class=\"language-text\">1</code> => <code class=\"language-text\">1</code>로 상태가 변하였으므로 다시 렌더가 일어나지 않을 것이므로 정답을 <code class=\"language-text\">state 0</code>, <code class=\"language-text\">state 1</code>이라 생각했다.<br>\n하지만 정답은 <code class=\"language-text\">state 0</code>, <code class=\"language-text\">state 1</code>, <code class=\"language-text\">state 1</code>이었다.<br>\n유튜브에서의 설명도 나랑 완전히 같지만 <code class=\"language-text\">setState(1)</code>이 호출 되어 <code class=\"language-text\">1</code> => <code class=\"language-text\">1</code>로 상태가 변하지 않음에도 렌더가 일어난다고 설명한다. 나는 이해가 가지 않았다, 분명 <code class=\"language-text\">setState</code>가 호출되어도 상태가 변하지 않으면 최적화로 리렌더링이 일어나지 않는다고 알고 있었기 때문이다.</p>\n<p>다음 코드를 확인해 보자.</p>\n<div\n              class=\"gatsby-code-button-container\"\n              data-toaster-id=\"50590721607741780000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"📋  코드를 복사했습니다.\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`  const [state, setState] = useState(0);\r\n  console.log('state', state);\r\n\r\n  useEffect(() => {\r\n    setState(0);\r\n  }, [state]);`, `50590721607741780000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"\"\n              >\n                copy<svg stroke=\"currentColor\" fill=\"none\" stroke-width=\"2\" viewBox=\"0 0 24 24\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"h-4 w-4\" height=\"1em\" width=\"1em\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2\"></path><rect x=\"8\" y=\"2\" width=\"8\" height=\"4\" rx=\"1\" ry=\"1\"></rect></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\">  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">,</span> setState<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'state'</span><span class=\"token punctuation\">,</span> state<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>이 코드의 결과는 분명히 <code class=\"language-text\">state 0</code>이다. 분명히 리렌더링이 일어나지 않는다. 내가 생각한 것처럼 <code class=\"language-text\">setState(0)</code>이 호출되어도 <code class=\"language-text\">0</code> => <code class=\"language-text\">0</code>으로 상태가 변하지 않기 때문이다, 근데 왜 처음 문제의 코드는 리렌더링이 일어나는 것일까?</p>\n<h2 id=\"1-early-bailout-조건\" style=\"position:relative;\"><a href=\"#1-early-bailout-%EC%A1%B0%EA%B1%B4\" aria-label=\"1 early bailout 조건 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1 early bailout 조건</h2>\n<p><code class=\"language-text\">setState</code>에서 이전 상태와 다음 상태를 비교하여 상태가 변하지 않으면 리렌더링을 하지 않도록 최적화 하는 것을 <code class=\"language-text\">early bailout</code>이라고 한다. <code class=\"language-text\">setState</code>를 정의하는 소스코드를 확인해 보자.</p>\n<div\n              class=\"gatsby-code-button-container\"\n              data-toaster-id=\"88428816314331990000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"📋  코드를 복사했습니다.\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`    const alternate = fiber.alternate;\r\n    if (\r\n      fiber.lanes === NoLanes &&\r\n      (alternate === null || alternate.lanes === NoLanes)\r\n    ) {\r\n      const lastRenderedReducer = queue.lastRenderedReducer;\r\n      if (lastRenderedReducer !== null) {\r\n        let prevDispatcher;\r\n        try {\r\n          const currentState: S = (queue.lastRenderedState: any);\r\n          const eagerState = lastRenderedReducer(currentState, action);\r\n          update.hasEagerState = true;\r\n          update.eagerState = eagerState;\r\n          if (is(eagerState, currentState)) {\r\n            enqueueConcurrentHookUpdateAndEagerlyBailout(fiber, queue, update);\r\n            return;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    const root = enqueueConcurrentHookUpdate(fiber, queue, update, lane);`, `88428816314331990000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"\"\n              >\n                copy<svg stroke=\"currentColor\" fill=\"none\" stroke-width=\"2\" viewBox=\"0 0 24 24\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"h-4 w-4\" height=\"1em\" width=\"1em\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2\"></path><rect x=\"8\" y=\"2\" width=\"8\" height=\"4\" rx=\"1\" ry=\"1\"></rect></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\">    <span class=\"token keyword\">const</span> alternate <span class=\"token operator\">=</span> fiber<span class=\"token punctuation\">.</span>alternate<span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>\r\n      fiber<span class=\"token punctuation\">.</span>lanes <span class=\"token operator\">===</span> NoLanes <span class=\"token operator\">&amp;&amp;</span>\r\n      <span class=\"token punctuation\">(</span>alternate <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">||</span> alternate<span class=\"token punctuation\">.</span>lanes <span class=\"token operator\">===</span> NoLanes<span class=\"token punctuation\">)</span>\r\n    <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n      <span class=\"token keyword\">const</span> lastRenderedReducer <span class=\"token operator\">=</span> queue<span class=\"token punctuation\">.</span>lastRenderedReducer<span class=\"token punctuation\">;</span>\r\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>lastRenderedReducer <span class=\"token operator\">!==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">let</span> prevDispatcher<span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\r\n          <span class=\"token keyword\">const</span> currentState<span class=\"token operator\">:</span> <span class=\"token constant\">S</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>queue<span class=\"token punctuation\">.</span>lastRenderedState<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n          <span class=\"token keyword\">const</span> eagerState <span class=\"token operator\">=</span> <span class=\"token function\">lastRenderedReducer</span><span class=\"token punctuation\">(</span>currentState<span class=\"token punctuation\">,</span> action<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n          update<span class=\"token punctuation\">.</span>hasEagerState <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\r\n          update<span class=\"token punctuation\">.</span>eagerState <span class=\"token operator\">=</span> eagerState<span class=\"token punctuation\">;</span>\r\n          <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">is</span><span class=\"token punctuation\">(</span>eagerState<span class=\"token punctuation\">,</span> currentState<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token function\">enqueueConcurrentHookUpdateAndEagerlyBailout</span><span class=\"token punctuation\">(</span>fiber<span class=\"token punctuation\">,</span> queue<span class=\"token punctuation\">,</span> update<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\r\n          <span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">}</span>\r\n      <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> <span class=\"token function\">enqueueConcurrentHookUpdate</span><span class=\"token punctuation\">(</span>fiber<span class=\"token punctuation\">,</span> queue<span class=\"token punctuation\">,</span> update<span class=\"token punctuation\">,</span> lane<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>위 코드에서</p>\n<div\n              class=\"gatsby-code-button-container\"\n              data-toaster-id=\"20044509354187514000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"📋  코드를 복사했습니다.\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`if (is(eagerState, currentState)) {\r\n  enqueueConcurrentHookUpdateAndEagerlyBailout(fiber, queue, update);\r\n  return;\r\n}`, `20044509354187514000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"\"\n              >\n                copy<svg stroke=\"currentColor\" fill=\"none\" stroke-width=\"2\" viewBox=\"0 0 24 24\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"h-4 w-4\" height=\"1em\" width=\"1em\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2\"></path><rect x=\"8\" y=\"2\" width=\"8\" height=\"4\" rx=\"1\" ry=\"1\"></rect></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">is</span><span class=\"token punctuation\">(</span>eagerState<span class=\"token punctuation\">,</span> currentState<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token function\">enqueueConcurrentHookUpdateAndEagerlyBailout</span><span class=\"token punctuation\">(</span>fiber<span class=\"token punctuation\">,</span> queue<span class=\"token punctuation\">,</span> update<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>이 부분이 <code class=\"language-text\">early bailout</code>을 하는 부분이다. 이전 상태와 다음 상태를 비교하여 상태가 변하지 않으면 <code class=\"language-text\">return</code>하여 리렌더링을 하지 않도록 한다. 만약 <code class=\"language-text\">early bailout</code>이 발생하지 않으면 <code class=\"language-text\">enqueueConcurrentHookUpdate</code>를 호출하여 리렌더링을 진행한다.</p>\n<p>이 부분이 실행되기 위해 또 다른 조건문이 있는데 그것이</p>\n<div\n              class=\"gatsby-code-button-container\"\n              data-toaster-id=\"34078580422873526000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"📋  코드를 복사했습니다.\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`if (\r\n      fiber.lanes === NoLanes &&\r\n      (alternate === null || alternate.lanes === NoLanes)\r\n    ) { \r\n      ...\r\n    }`, `34078580422873526000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"\"\n              >\n                copy<svg stroke=\"currentColor\" fill=\"none\" stroke-width=\"2\" viewBox=\"0 0 24 24\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"h-4 w-4\" height=\"1em\" width=\"1em\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2\"></path><rect x=\"8\" y=\"2\" width=\"8\" height=\"4\" rx=\"1\" ry=\"1\"></rect></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>\r\n      fiber<span class=\"token punctuation\">.</span>lanes <span class=\"token operator\">===</span> NoLanes <span class=\"token operator\">&amp;&amp;</span>\r\n      <span class=\"token punctuation\">(</span>alternate <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">||</span> alternate<span class=\"token punctuation\">.</span>lanes <span class=\"token operator\">===</span> NoLanes<span class=\"token punctuation\">)</span>\r\n    <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> \r\n      <span class=\"token operator\">...</span>\r\n    <span class=\"token punctuation\">}</span></code></pre></div>\n<p>이 부분이다.\r\n<code class=\"language-text\">early bailout</code>이 발생하기 위한 조건을 정리하면</p>\n<ol>\n<li><code class=\"language-text\">fiber.lanes === NoLanes</code></li>\n<li><code class=\"language-text\">alternate === null || alternate.lanes === NoLanes</code></li>\n<li><code class=\"language-text\">is(eagerState, currentState)</code></li>\n</ol>\n<p>이렇게 3가지 조건이 모두 만족해야 <code class=\"language-text\">early bailout</code>이 발생한다.<br>\n<code class=\"language-text\">fiber</code>,<code class=\"language-text\">alternate</code>와 <code class=\"language-text\">lanes</code>, <code class=\"language-text\">NoLanes</code>은 무엇인지 알아보자.</p>\n<h2 id=\"2-virtual-dom\" style=\"position:relative;\"><a href=\"#2-virtual-dom\" aria-label=\"2 virtual dom permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2 Virtual DOM</h2>\n<p><code class=\"language-text\">fiber, alternate, lanes, NoLanes</code> 모두 <code class=\"language-text\">Virtual DOM</code>의 구조와 관련있는 용어이다.</p>\n<h3 id=\"1-virtual-dom의-구조\" style=\"position:relative;\"><a href=\"#1-virtual-dom%EC%9D%98-%EA%B5%AC%EC%A1%B0\" aria-label=\"1 virtual dom의 구조 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>(1) Virtual DOM의 구조</h3>\n<p>위 코드에서 <code class=\"language-text\">fiber</code>란 <code class=\"language-text\">Virtual DOM</code>을 이루는 각 노드를 지칭한다, 또한 <code class=\"language-text\">Virtual DOM</code>은 더블 버퍼링 구조로 2가지의 트리가 존재하는데, <code class=\"language-text\">current V DOM</code>과 <code class=\"language-text\">workInProgress V DOM</code>이다.</p>\n<ul>\n<li><code class=\"language-text\">current V DOM</code> : 실제 DOM에 마운트 된 <code class=\"language-text\">fiber</code> 노드들로 이루어진 트리이다.</li>\n<li><code class=\"language-text\">workInProgress V DOM</code> : <code class=\"language-text\">render phase</code>에서 작업 중인 <code class=\"language-text\">fiber</code>노드 트리이다.</li>\n</ul>\n<p>그리고 <code class=\"language-text\">workInProgress V DOM</code>은 <code class=\"language-text\">current V DOM</code>을 복사하여 만들어 지며 이때 <code class=\"language-text\">alternate</code>라는 키로 서로를 참조하게 된다.</p>\n<h3 id=\"2-render-phase-commit-phase\" style=\"position:relative;\"><a href=\"#2-render-phase-commit-phase\" aria-label=\"2 render phase commit phase permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>(2) render phase, commit phase</h3>\n<p><code class=\"language-text\">render phase</code>는 재조정하는 단계이다.<br>\n2개의 <code class=\"language-text\">V DOM</code>을 비교하며 수정 사항에대해 <code class=\"language-text\">DOM</code>에 적용하기 위한 <code class=\"language-text\">WORK</code>를 스케줄러에 등록한다.</p>\n<p><code class=\"language-text\">commit phase</code>는 <code class=\"language-text\">workInProgress V DOM</code>을 실제 DOM에 반영하는 단계이다. 또한 이러한 DOM 조작과 <code class=\"language-text\">useEffect</code>와 같은 라이프사이클을 실행한다.<br>\n이러한 반영이 모두 끝나면 브라우저가 DOM을 기반으로 화면을 그리게 된다.</p>\n<h3 id=\"3-lanes\" style=\"position:relative;\"><a href=\"#3-lanes\" aria-label=\"3 lanes permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>(3) Lanes</h3>\n<p><code class=\"language-text\">lanes</code>란 다양한 이벤트에대한 업데이트의 우선 순위를 관리하는 데 사용되는 개념이다.<br>\n각 업데이트는 다른 <code class=\"language-text\">Lane</code>에 할당되며, 이는 React가 어떤 업데이트를 먼저 처리할지 결정하는 데 사용된다. <code class=\"language-text\">NoLanes</code>는 <code class=\"language-text\">Lane</code>이 할당되지 않은 상태 즉, 업데이트할 내용이 없는 상태를 의미한다.</p>\n<blockquote>\n<p>예를들어 사용자의 상호 작용 이벤트는 가장 높은 우선 순위를 가지는 <code class=\"language-text\">Lane</code>에 할당 된다.</p>\n</blockquote>\n<h3 id=\"4-정리\" style=\"position:relative;\"><a href=\"#4-%EC%A0%95%EB%A6%AC\" aria-label=\"4 정리 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>(4) 정리</h3>\n<p><img src=\"https://github.com/Jeongseulho/sh-snippets/assets/110578739/c473870d-8c1b-4183-be09-9a47964f16b2\" alt=\"image\"><br>\n위 사진에서 <code class=\"language-text\">Root Node</code>와 연결되어 있는 <code class=\"language-text\">tree</code>가 <code class=\"language-text\">current V DOM</code>이 되는 것이다.</p>\n<p><code class=\"language-text\">render phase</code>에서 <code class=\"language-text\">workInProgress V DOM</code>에서 업데이트가 일어나며 업데이트가 완료되면 <code class=\"language-text\">commit phase</code>가 진행되며 <code class=\"language-text\">Root Node</code>가 <code class=\"language-text\">workInProgress V DOM</code>과 연결된다.<br>\n이렇게 연결된 순간 <code class=\"language-text\">workInProgress V DOM</code>은 <code class=\"language-text\">current V DOM</code>로 변경되는 것이다.</p>\n<ul>\n<li>\n<p>fiber</p>\n<ul>\n<li><code class=\"language-text\">Virtual DOM</code>을 이루는 각 노드</li>\n<li><code class=\"language-text\">alternate, lanes</code>와 같은 여러 속성을 가지고 있다.</li>\n</ul>\n</li>\n<li>\n<p>alternate</p>\n<ul>\n<li><code class=\"language-text\">workInProgress V DOM</code>과 <code class=\"language-text\">current V DOM</code>을 서로 참조하는 키</li>\n</ul>\n</li>\n<li>\n<p>lanes</p>\n<ul>\n<li>다양한 업데이트의 우선 순위를 관리하는 개념</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"3-lanes-코드-해석\" style=\"position:relative;\"><a href=\"#3-lanes-%EC%BD%94%EB%93%9C-%ED%95%B4%EC%84%9D\" aria-label=\"3 lanes 코드 해석 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3 lanes 코드 해석</h2>\n<p>위 개념을 기반으로 조건문을 해석해보면</p>\n<ol>\n<li>\n<p><code class=\"language-text\">fiber.lanes === NoLanes</code>이란 현재 <code class=\"language-text\">fiber</code>에서 업데이트할 내용이 없다는 것을 의미한다.</p>\n</li>\n<li>\n<p><code class=\"language-text\">alternate === null || alternate.lanes === NoLanes</code>이란 현재 <code class=\"language-text\">fiber</code>의 <code class=\"language-text\">alternate</code> 즉, <code class=\"language-text\">workInProgress V DOM</code>의 대응하는 <code class=\"language-text\">fiber</code>가 없거나 <code class=\"language-text\">workInProgress V DOM</code>의 대응하는 <code class=\"language-text\">fiber</code>에서 업데이트할 내용이 없다는 것을 의미한다.</p>\n</li>\n</ol>\n<p><code class=\"language-text\">early bailout</code>이 발생하려면 이전 상태와 변경된 상태를 비교하기 전에 먼저 2가지 조건문을 모두 만족해야 한다.</p>\n<p>그러면 <code class=\"language-text\">lanes</code>은 언제 <code class=\"language-text\">NoLanes</code>이 되고 언제 <code class=\"language-text\">NoLanes</code>가 아닌지 알아보자.</p>\n<h3 id=\"1-lanes의-dirty\" style=\"position:relative;\"><a href=\"#1-lanes%EC%9D%98-dirty\" aria-label=\"1 lanes의 dirty permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>(1) <code class=\"language-text\">lanes</code>의 <code class=\"language-text\">dirty</code></h3>\n<p><code class=\"language-text\">lanes</code>에 어떤 업데이트가 할당되면 <code class=\"language-text\">lanes</code>는 <code class=\"language-text\">dirty</code>가 된다. 즉, <code class=\"language-text\">NoLanes</code>가 아닌 상태가 된다.<br>\n이렇게 <code class=\"language-text\">dirty</code>하게 되는 순간은 <code class=\"language-text\">enqueueUpdate</code>가 호출되는 순간이다.<br>\n위 코드에서 <code class=\"language-text\">early bailout</code>이 발생하지 않을때</p>\n<div\n              class=\"gatsby-code-button-container\"\n              data-toaster-id=\"75698490703520870000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"📋  코드를 복사했습니다.\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`const root = enqueueConcurrentHookUpdate(fiber, queue, update, lane);`, `75698490703520870000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"\"\n              >\n                copy<svg stroke=\"currentColor\" fill=\"none\" stroke-width=\"2\" viewBox=\"0 0 24 24\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"h-4 w-4\" height=\"1em\" width=\"1em\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2\"></path><rect x=\"8\" y=\"2\" width=\"8\" height=\"4\" rx=\"1\" ry=\"1\"></rect></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> <span class=\"token function\">enqueueConcurrentHookUpdate</span><span class=\"token punctuation\">(</span>fiber<span class=\"token punctuation\">,</span> queue<span class=\"token punctuation\">,</span> update<span class=\"token punctuation\">,</span> lane<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>이 함수가 실행된다. 이 함수는</p>\n<div\n              class=\"gatsby-code-button-container\"\n              data-toaster-id=\"74825109982583160000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"📋  코드를 복사했습니다.\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`export function enqueueConcurrentHookUpdate<S, A>(\r\n  fiber: Fiber,\r\n  queue: HookQueue<S, A>,\r\n  update: HookUpdate<S, A>,\r\n  lane: Lane,\r\n): FiberRoot | null {\r\n\r\n  ...\r\n\r\n  enqueueUpdate(fiber, concurrentQueue, concurrentUpdate, lane);\r\n\r\n  ...\r\n\r\n}`, `74825109982583160000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"\"\n              >\n                copy<svg stroke=\"currentColor\" fill=\"none\" stroke-width=\"2\" viewBox=\"0 0 24 24\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"h-4 w-4\" height=\"1em\" width=\"1em\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2\"></path><rect x=\"8\" y=\"2\" width=\"8\" height=\"4\" rx=\"1\" ry=\"1\"></rect></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token generic-function\"><span class=\"token function\">enqueueConcurrentHookUpdate</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token constant\">S</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">A</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>\r\n  fiber<span class=\"token operator\">:</span> Fiber<span class=\"token punctuation\">,</span>\r\n  queue<span class=\"token operator\">:</span> HookQueue<span class=\"token operator\">&lt;</span><span class=\"token constant\">S</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">A</span><span class=\"token operator\">></span><span class=\"token punctuation\">,</span>\r\n  update<span class=\"token operator\">:</span> HookUpdate<span class=\"token operator\">&lt;</span><span class=\"token constant\">S</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">A</span><span class=\"token operator\">></span><span class=\"token punctuation\">,</span>\r\n  lane<span class=\"token operator\">:</span> Lane<span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> FiberRoot <span class=\"token operator\">|</span> <span class=\"token keyword\">null</span> <span class=\"token punctuation\">{</span>\r\n\r\n  <span class=\"token operator\">...</span>\r\n\r\n  <span class=\"token function\">enqueueUpdate</span><span class=\"token punctuation\">(</span>fiber<span class=\"token punctuation\">,</span> concurrentQueue<span class=\"token punctuation\">,</span> concurrentUpdate<span class=\"token punctuation\">,</span> lane<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token operator\">...</span>\r\n\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>이렇게 정의 되며 여기서 <code class=\"language-text\">enqueueUpdate</code>가 호출된다.</p>\n<div\n              class=\"gatsby-code-button-container\"\n              data-toaster-id=\"12046735015323984000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"📋  코드를 복사했습니다.\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`function enqueueUpdate(\r\n  fiber: Fiber,\r\n  queue: ConcurrentQueue | null,\r\n  update: ConcurrentUpdate | null,\r\n  lane: Lane,\r\n) {\r\n\r\n  ...\r\n\r\n  fiber.lanes = mergeLanes(fiber.lanes, lane);\r\n  const alternate = fiber.alternate;\r\n  if (alternate !== null) {\r\n    alternate.lanes = mergeLanes(alternate.lanes, lane);\r\n  }\r\n}`, `12046735015323984000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"\"\n              >\n                copy<svg stroke=\"currentColor\" fill=\"none\" stroke-width=\"2\" viewBox=\"0 0 24 24\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"h-4 w-4\" height=\"1em\" width=\"1em\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2\"></path><rect x=\"8\" y=\"2\" width=\"8\" height=\"4\" rx=\"1\" ry=\"1\"></rect></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">enqueueUpdate</span><span class=\"token punctuation\">(</span>\r\n  fiber<span class=\"token operator\">:</span> Fiber<span class=\"token punctuation\">,</span>\r\n  queue<span class=\"token operator\">:</span> ConcurrentQueue <span class=\"token operator\">|</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\r\n  update<span class=\"token operator\">:</span> ConcurrentUpdate <span class=\"token operator\">|</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\r\n  lane<span class=\"token operator\">:</span> Lane<span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n\r\n  <span class=\"token operator\">...</span>\r\n\r\n  fiber<span class=\"token punctuation\">.</span>lanes <span class=\"token operator\">=</span> <span class=\"token function\">mergeLanes</span><span class=\"token punctuation\">(</span>fiber<span class=\"token punctuation\">.</span>lanes<span class=\"token punctuation\">,</span> lane<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">const</span> alternate <span class=\"token operator\">=</span> fiber<span class=\"token punctuation\">.</span>alternate<span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>alternate <span class=\"token operator\">!==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    alternate<span class=\"token punctuation\">.</span>lanes <span class=\"token operator\">=</span> <span class=\"token function\">mergeLanes</span><span class=\"token punctuation\">(</span>alternate<span class=\"token punctuation\">.</span>lanes<span class=\"token punctuation\">,</span> lane<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>이 코드를 보면 <code class=\"language-text\">fiber</code>와 <code class=\"language-text\">alternate</code>의 <code class=\"language-text\">lanes</code>모두 <code class=\"language-text\">dirty</code>하게 된다.</p>\n<p>즉, <code class=\"language-text\">early bailout</code>이 발생하지 않는다면 <code class=\"language-text\">setState</code>호출 시 <code class=\"language-text\">fiber</code>와 <code class=\"language-text\">alternate</code>의 <code class=\"language-text\">lanes</code>모두 <code class=\"language-text\">dirty</code>하게 된다.</p>\n<h3 id=\"2-lanes의-clean\" style=\"position:relative;\"><a href=\"#2-lanes%EC%9D%98-clean\" aria-label=\"2 lanes의 clean permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>(2) <code class=\"language-text\">lanes</code>의 <code class=\"language-text\">clean</code></h3>\n<p><code class=\"language-text\">lanes</code>가 <code class=\"language-text\">NoLanes</code>가 되는 코드는</p>\n<div\n              class=\"gatsby-code-button-container\"\n              data-toaster-id=\"39281723174721380000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"📋  코드를 복사했습니다.\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`function beginWork(\r\n  current: Fiber | null,\r\n  workInProgress: Fiber,\r\n  renderLanes: Lanes,\r\n): Fiber | null {\r\n  ...\r\n  workInProgress.lanes = NoLanes;\r\n  ...\r\n}`, `39281723174721380000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"\"\n              >\n                copy<svg stroke=\"currentColor\" fill=\"none\" stroke-width=\"2\" viewBox=\"0 0 24 24\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"h-4 w-4\" height=\"1em\" width=\"1em\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2\"></path><rect x=\"8\" y=\"2\" width=\"8\" height=\"4\" rx=\"1\" ry=\"1\"></rect></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">beginWork</span><span class=\"token punctuation\">(</span>\r\n  current<span class=\"token operator\">:</span> Fiber <span class=\"token operator\">|</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\r\n  workInProgress<span class=\"token operator\">:</span> Fiber<span class=\"token punctuation\">,</span>\r\n  renderLanes<span class=\"token operator\">:</span> Lanes<span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Fiber <span class=\"token operator\">|</span> <span class=\"token keyword\">null</span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token operator\">...</span>\r\n  workInProgress<span class=\"token punctuation\">.</span>lanes <span class=\"token operator\">=</span> NoLanes<span class=\"token punctuation\">;</span>\r\n  <span class=\"token operator\">...</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>이 코드이다, <code class=\"language-text\">beginWork</code>라는 작업을 하기 전에 해당 <code class=\"language-text\">workInProgress</code>트리의 <code class=\"language-text\">fiber</code>에대한 <code class=\"language-text\">lanes</code>를 <code class=\"language-text\">NoLanes</code>로 초기화한다.<br>\n여기서 위에서 언급하던 현재 <code class=\"language-text\">fiber</code>는 <code class=\"language-text\">lanes</code>가 <code class=\"language-text\">dirty</code>상태가 되면서 <code class=\"language-text\">workInProgress</code>가 된 것을 알 수 있다.</p>\n<blockquote>\n<p><code class=\"language-text\">beginWork</code>는 <code class=\"language-text\">render phase</code>에서 <code class=\"language-text\">workInProgress V DOM</code>을 만들거나 수정하는 작업을 하는 함수이다.</p>\n</blockquote>\n<p><img src=\"https://d2.naver.com/content/images/2023/07/14.gif\" alt=\"image\"></p>\n<p>즉, <code class=\"language-text\">render phase</code>에서 <code class=\"language-text\">workInProgress</code>의 <code class=\"language-text\">lanes</code>는 <code class=\"language-text\">clean</code>하게 된다.</p>\n<h3 id=\"3-정리\" style=\"position:relative;\"><a href=\"#3-%EC%A0%95%EB%A6%AC\" aria-label=\"3 정리 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>(3) 정리</h3>\n<p>위의 내용을 정리하면</p>\n<ol>\n<li><code class=\"language-text\">setState</code> 호출 시 <code class=\"language-text\">fiber</code>와 <code class=\"language-text\">alternate</code>의 <code class=\"language-text\">lanes</code>가 <code class=\"language-text\">dirty</code>하게 된다.(단, <code class=\"language-text\">early bailout</code>이 발생하지 않는다면)</li>\n<li><code class=\"language-text\">setState</code> 호출 이후 <code class=\"language-text\">render phase</code>에서 <code class=\"language-text\">workInProgress</code>(1번에서의 <code class=\"language-text\">fiber</code>)의 <code class=\"language-text\">lanes</code>가 <code class=\"language-text\">clean</code>하게 된다.</li>\n</ol>\n<p>이제 처음 의문이 생긴 코드를 해석해보자.</p>\n<h2 id=\"3-문제-코드-해석\" style=\"position:relative;\"><a href=\"#3-%EB%AC%B8%EC%A0%9C-%EC%BD%94%EB%93%9C-%ED%95%B4%EC%84%9D\" aria-label=\"3 문제 코드 해석 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3 문제 코드 해석</h2>\n<h3 id=\"1-early-bailout이-발생하는-코드\" style=\"position:relative;\"><a href=\"#1-early-bailout%EC%9D%B4-%EB%B0%9C%EC%83%9D%ED%95%98%EB%8A%94-%EC%BD%94%EB%93%9C\" aria-label=\"1 early bailout이 발생하는 코드 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>(1) early bailout이 발생하는 코드</h3>\n<div\n              class=\"gatsby-code-button-container\"\n              data-toaster-id=\"67716656206844890000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"📋  코드를 복사했습니다.\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`  const [state, setState] = useState(0);\r\n  console.log('state', state);\r\n\r\n  useEffect(() => {\r\n    setState(0);\r\n  }, [state]);`, `67716656206844890000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"\"\n              >\n                copy<svg stroke=\"currentColor\" fill=\"none\" stroke-width=\"2\" viewBox=\"0 0 24 24\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"h-4 w-4\" height=\"1em\" width=\"1em\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2\"></path><rect x=\"8\" y=\"2\" width=\"8\" height=\"4\" rx=\"1\" ry=\"1\"></rect></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\">  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">,</span> setState<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'state'</span><span class=\"token punctuation\">,</span> state<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>처음 state가 0이고 마운트 이후 <code class=\"language-text\">setState(0)</code>실행 하면 이 시점에서</p>\n<ol>\n<li>첫 렌더링이므로 <code class=\"language-text\">fiber.lanes === NoLanes</code>은 <code class=\"language-text\">true</code>이다.</li>\n<li><code class=\"language-text\">workInProgress V DOM</code>은 없으므로 <code class=\"language-text\">alternate === null</code>은 <code class=\"language-text\">true</code>이다.</li>\n<li><code class=\"language-text\">is(eagerState, currentState)</code>은 <code class=\"language-text\">true</code>이다.</li>\n</ol>\n<p>즉, <code class=\"language-text\">early bailout</code>이 발생한다.</p>\n<blockquote>\n<p><code class=\"language-text\">workInProgress V DOM</code>은 최소한 1번 이상의 업데이트가 발생하여야 생성된다.<br>\n업데이트가 발생되어 <code class=\"language-text\">workInProgress V DOM</code>이 필요한 순간에야 <code class=\"language-text\">current V DOM</code>을 복사한 <code class=\"language-text\">workInProgress V DOM</code>이 생성되고 업데이트가 진행된다.</p>\n</blockquote>\n<h3 id=\"2-early-bailout이-발생하지-않는-코드\" style=\"position:relative;\"><a href=\"#2-early-bailout%EC%9D%B4-%EB%B0%9C%EC%83%9D%ED%95%98%EC%A7%80-%EC%95%8A%EB%8A%94-%EC%BD%94%EB%93%9C\" aria-label=\"2 early bailout이 발생하지 않는 코드 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>(2) early bailout이 발생하지 않는 코드</h3>\n<div\n              class=\"gatsby-code-button-container\"\n              data-toaster-id=\"62440685464416590000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"📋  코드를 복사했습니다.\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`  const [state, setState] = useState(0);\r\n  console.log('state', state);\r\n\r\n  useEffect(() => {\r\n    setState(1);\r\n  }, [state]);`, `62440685464416590000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"\"\n              >\n                copy<svg stroke=\"currentColor\" fill=\"none\" stroke-width=\"2\" viewBox=\"0 0 24 24\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"h-4 w-4\" height=\"1em\" width=\"1em\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2\"></path><rect x=\"8\" y=\"2\" width=\"8\" height=\"4\" rx=\"1\" ry=\"1\"></rect></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\">  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">,</span> setState<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'state'</span><span class=\"token punctuation\">,</span> state<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>이 코드의 과정을 2개의 <code class=\"language-text\">V DOM</code>을 기준으로 설명해보자.<br>\n2개의 <code class=\"language-text\">V DOM</code>은 swap이 되면서 역할이 바뀌는 것이기 때문에 fiber1, fiber2로 표기하겠다.</p>\n<ol>\n<li>첫 렌더링 이후\n<ul>\n<li>fiber1 : <code class=\"language-text\">current</code>, <code class=\"language-text\">clean</code></li>\n<li>fiber2 : <code class=\"language-text\">null</code></li>\n</ul>\n</li>\n<li><code class=\"language-text\">setState(1)</code> 호출 이후 <code class=\"language-text\">enqueueUpdate</code>로 인해 <code class=\"language-text\">workInProgress</code>생성 및 2개의 <code class=\"language-text\">V DOM</code>을 모두 <code class=\"language-text\">dirty</code>로\n<ul>\n<li>fiber1 : <code class=\"language-text\">current</code>, <code class=\"language-text\">dirty</code></li>\n<li>fiber2 : <code class=\"language-text\">workInProgress</code>, <code class=\"language-text\">dirty</code></li>\n</ul>\n</li>\n<li><code class=\"language-text\">render phase</code>에서 <code class=\"language-text\">beginWork</code>가 호출되면서 <code class=\"language-text\">workInProgress</code>를 <code class=\"language-text\">clean</code>\n<ul>\n<li>fiber1 : <code class=\"language-text\">current</code>, <code class=\"language-text\">dirty</code></li>\n<li>fiber2 : <code class=\"language-text\">workInProgress</code>, <code class=\"language-text\">clean</code></li>\n</ul>\n</li>\n<li><code class=\"language-text\">commit phase</code>이후 2개의 <code class=\"language-text\">V DOM</code>이 swap\n<ul>\n<li>fiber1 : <code class=\"language-text\">workInProgress</code>, <code class=\"language-text\">dirty</code></li>\n<li>fiber2 : <code class=\"language-text\">current</code>, <code class=\"language-text\">clean</code></li>\n</ul>\n</li>\n<li>의존성 배열에 <code class=\"language-text\">state</code>로 인한 <code class=\"language-text\">setState(1)</code>이 호출\n<ul>\n<li>fiber1 : <code class=\"language-text\">workInProgress</code>, <code class=\"language-text\">dirty</code></li>\n<li>fiber2 : <code class=\"language-text\">current</code>, <code class=\"language-text\">dirty</code></li>\n</ul>\n</li>\n<li><code class=\"language-text\">beginWork</code> 호출</li>\n</ol>\n<p>5번에서 <code class=\"language-text\">setState(1)</code>이 호출되어 1 => 1로 상태가 변하지 않았지만 <code class=\"language-text\">early bailout</code>으로 빠지지 않았고 6번에서 <code class=\"language-text\">render phase</code>가 진행되면서 컴포넌트가 다시 실행되는 것이다.</p>\n<h2 id=\"4-마치며\" style=\"position:relative;\"><a href=\"#4-%EB%A7%88%EC%B9%98%EB%A9%B0\" aria-label=\"4 마치며 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4 마치며</h2>\n<p>굉장히 Low한 레벨의 내용이라 이해하는데 굉장히 오래걸리고 어려웠다.<br>\n중요한 점은 <code class=\"language-text\">state</code>가 변하지 않는 <code class=\"language-text\">setState</code> 호출에도 리렌더링 최적화가 보장되지 않는다는 것이다.</p>","tableOfContents":"<ul>\n<li>\n<p><a href=\"#0-%EB%93%A4%EC%96%B4%EA%B0%80%EB%A9%B0\">0. 들어가며</a></p>\n</li>\n<li>\n<p><a href=\"#1-early-bailout-%EC%A1%B0%EA%B1%B4\">1 early bailout 조건</a></p>\n</li>\n<li>\n<p><a href=\"#2-virtual-dom\">2 Virtual DOM</a></p>\n<ul>\n<li><a href=\"#1-virtual-dom%EC%9D%98-%EA%B5%AC%EC%A1%B0\">(1) Virtual DOM의 구조</a></li>\n<li><a href=\"#2-render-phase-commit-phase\">(2) render phase, commit phase</a></li>\n<li><a href=\"#3-lanes\">(3) Lanes</a></li>\n<li><a href=\"#4-%EC%A0%95%EB%A6%AC\">(4) 정리</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#3-lanes-%EC%BD%94%EB%93%9C-%ED%95%B4%EC%84%9D\">3 lanes 코드 해석</a></p>\n<ul>\n<li><a href=\"#1-lanes%EC%9D%98-dirty\">(1) <code class=\"language-text\">lanes</code>의 <code class=\"language-text\">dirty</code></a></li>\n<li><a href=\"#2-lanes%EC%9D%98-clean\">(2) <code class=\"language-text\">lanes</code>의 <code class=\"language-text\">clean</code></a></li>\n<li><a href=\"#3-%EC%A0%95%EB%A6%AC\">(3) 정리</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#3-%EB%AC%B8%EC%A0%9C-%EC%BD%94%EB%93%9C-%ED%95%B4%EC%84%9D\">3 문제 코드 해석</a></p>\n<ul>\n<li><a href=\"#1-early-bailout%EC%9D%B4-%EB%B0%9C%EC%83%9D%ED%95%98%EB%8A%94-%EC%BD%94%EB%93%9C\">(1) early bailout이 발생하는 코드</a></li>\n<li><a href=\"#2-early-bailout%EC%9D%B4-%EB%B0%9C%EC%83%9D%ED%95%98%EC%A7%80-%EC%95%8A%EB%8A%94-%EC%BD%94%EB%93%9C\">(2) early bailout이 발생하지 않는 코드</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#4-%EB%A7%88%EC%B9%98%EB%A9%B0\">4 마치며</a></p>\n</li>\n</ul>","frontmatter":{"title":"React early bailout","summary":"React의 상태 변화에 따른 렌더링 최적화인 early bailout의 조건과 과정을 정리","date":"2023년 11월 14일","tags":["React","state"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACQklEQVR42lWS22sTQRSH865QMJtsstmNCL4UfRAf1FZtBCkYmrRRK6XSQtGEKD4oKLV7r2IVITYYoyXXmZ3dXO2GtiYhzc00jYnVItUX/x3ZXfECh+EMzDeH7zdjIgWZFGQrA800sNCA4JCVgRgNMH2L0QBnoY2TjGOkIDt4fdUaZLLQwAfbC8W+J9WYSDYuva34QGtG2fGBlifV8KSaC8X+6VCJ4BAlKnYODa/kpxK16XT92JOMycrA8Vjt1vv+XG7Xk2qMRcvTcucqbM8oO5Pp5u31gV8dXHjzwYBtnHQ9XX9Q6jPlL1fWKtpkb7oZUAc3UMcHWu7EdkD9PJvpuhN1CwOsLMRZieAQKciUINs4afxd+b766fHW3mh4w4Sz0li0fDPbnc/3gqU9V7TsTTfn87vuRN3BI6eoUKJikJTu6RSVi683XZEtgkcmSpTNNDj8KHHoYcLOSRgNhhZTQ4sp8xIgeISzko1DDl7GWWTnEKVnhrMSzkKHgLTJ58Mlb6w8J9VtHBoNly5HN48/zY6sqr54dWRVHV7JHV1WzobUky8KBk+JWmlpYzSciFXu5Duh5v6J53lvvFrY/ykPfsR7B8+2v651vyd7B8uVfqTzbTJePbIEnLoFaTyVjUOnXhan4pVgru2KbJwJrd/Nt4O5ViDbupas+rMtf6Z5r/BxFtTOvVJxVqJE+S9MCrLhhtGQ4JGdRxbtw0CMgVYWWvQy09DCSAT/2/k/mNQ1nPqVlKA1TlFxGgnraWuZ/4P9gX8BxhA34OcT0WYAAAAASUVORK5CYII="},"images":{"fallback":{"src":"/static/89ef6b85c4f7d4da2503f53338002500/f816e/image.png","srcSet":"/static/89ef6b85c4f7d4da2503f53338002500/0357b/image.png 440w,\n/static/89ef6b85c4f7d4da2503f53338002500/7aeb9/image.png 880w,\n/static/89ef6b85c4f7d4da2503f53338002500/f816e/image.png 1760w","sizes":"(min-width: 1760px) 1760px, 100vw"},"sources":[{"srcSet":"/static/89ef6b85c4f7d4da2503f53338002500/bc572/image.webp 440w,\n/static/89ef6b85c4f7d4da2503f53338002500/ef23a/image.webp 880w,\n/static/89ef6b85c4f7d4da2503f53338002500/31eca/image.webp 1760w","type":"image/webp","sizes":"(min-width: 1760px) 1760px, 100vw"}]},"width":1760,"height":924}},"publicURL":"/static/89ef6b85c4f7d4da2503f53338002500/image.png"},"sources":["JSer.dev naver D2","Boaz youtube","bumkeyy","tnghgks"],"sources_link":["https://jser.dev/posts/react-18-early-bailout","https://www.youtube.com/watch?v=3XaXGZk3y5A","https://bumkeyy.tistory.com/1","https://tnghgks.tistory.com/1"]}}}]}},"pageContext":{"slug":"/tech/2023-11-14-React-early-bailout/","previous":{"fields":{"slug":"/tech/2023-10-08-Atomic-패턴-적용에-실패한-이유/"},"frontmatter":{"tags":["React","React 패턴"],"update":true,"title":"Atomic 패턴 적용"}},"next":{"fields":{"slug":"/tech/2023-11-21-Mixed-Content/"},"frontmatter":{"tags":["NextJs","https"],"update":true,"title":"Mixed Content"}}}},"staticQueryHashes":[],"slicesMap":{}}