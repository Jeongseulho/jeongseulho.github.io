{"componentChunkName":"component---src-templates-post-template-tsx","path":"/tech/2024-01-15-Proxy-패턴/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<h2 id=\"0-들어가며\" style=\"position:relative;\"><a href=\"#0-%EB%93%A4%EC%96%B4%EA%B0%80%EB%A9%B0\" aria-label=\"0 들어가며 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>0. 들어가며</h2>\n<p>JS에서 <code class=\"language-text\">Proxy</code> 객체와 사용법에 대해 정리</p>\n<h2 id=\"1-js-proxy-객체\" style=\"position:relative;\"><a href=\"#1-js-proxy-%EA%B0%9D%EC%B2%B4\" aria-label=\"1 js proxy 객체 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. JS Proxy 객체</h2>\n<p>JS에서 <code class=\"language-text\">Proxy</code> 객체는 다음과 같이 사용한다</p>\n<div\n              class=\"gatsby-code-button-container\"\n              data-toaster-id=\"75089386645098320000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"📋  코드를 복사했습니다.\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`const proxy = new Proxy(target, handler);`, `75089386645098320000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"\"\n              >\n                copy<svg stroke=\"currentColor\" fill=\"none\" stroke-width=\"2\" viewBox=\"0 0 24 24\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"h-4 w-4\" height=\"1em\" width=\"1em\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2\"></path><rect x=\"8\" y=\"2\" width=\"8\" height=\"4\" rx=\"1\" ry=\"1\"></rect></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> proxy <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Proxy</span><span class=\"token punctuation\">(</span>target<span class=\"token punctuation\">,</span> handler<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li>target : proxy가 감싸고 있는 객체</li>\n<li>handler : target에 대한 작업을 가로채고 수행할 함수</li>\n</ul>\n<div\n              class=\"gatsby-code-button-container\"\n              data-toaster-id=\"99028501587177880000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"📋  코드를 복사했습니다.\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`const targetObject = {\r\n  message: &quot;Hello, Proxy!&quot;,\r\n};\r\n\r\nconst handler = {\r\n  get: function (target, prop) {\r\n    console.log(\\`Accessing property: \\${prop}\\`);\r\n    return target[prop];\r\n  },\r\n};\r\n\r\nconst proxy = new Proxy(targetObject, handler);\r\nconsole.log(proxy.message);\r\n\r\n// 1. handler의 get메소드로 인하여 proxy.message로 접근시 &quot;Accessing property: message&quot; 출력\r\n// 2. &quot;Hello, Proxy!&quot;라는 문자열을 반환하고 &quot;Hello, Proxy!&quot;이 출력`, `99028501587177880000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"\"\n              >\n                copy<svg stroke=\"currentColor\" fill=\"none\" stroke-width=\"2\" viewBox=\"0 0 24 24\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"h-4 w-4\" height=\"1em\" width=\"1em\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2\"></path><rect x=\"8\" y=\"2\" width=\"8\" height=\"4\" rx=\"1\" ry=\"1\"></rect></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> targetObject <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token literal-property property\">message</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Hello, Proxy!\"</span><span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> handler <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token function-variable function\">get</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">target<span class=\"token punctuation\">,</span> prop</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Accessing property: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>prop<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">return</span> target<span class=\"token punctuation\">[</span>prop<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> proxy <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Proxy</span><span class=\"token punctuation\">(</span>targetObject<span class=\"token punctuation\">,</span> handler<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>proxy<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token comment\">// 1. handler의 get메소드로 인하여 proxy.message로 접근시 \"Accessing property: message\" 출력</span>\r\n<span class=\"token comment\">// 2. \"Hello, Proxy!\"라는 문자열을 반환하고 \"Hello, Proxy!\"이 출력</span></code></pre></div>\n<ul>\n<li>handler에서 가로챌 수 있는 메서드는 다음과 같다.</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th>핸들러 메서드</th>\n<th>작동 시점</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>get</td>\n<td>프로퍼티를 읽을 때</td>\n</tr>\n<tr>\n<td>set</td>\n<td>프로퍼티에 값을 쓸 때</td>\n</tr>\n<tr>\n<td>has</td>\n<td>in 연산자가 작동할 때</td>\n</tr>\n<tr>\n<td>deleteProperty</td>\n<td>delete 연산자가 작동할 때</td>\n</tr>\n<tr>\n<td>apply</td>\n<td>함수를 호출할 때</td>\n</tr>\n<tr>\n<td>constructor</td>\n<td>new 연산자가 작동할 때</td>\n</tr>\n<tr>\n<td>getPrototypeOf</td>\n<td>Object.getPrototypeOf</td>\n</tr>\n<tr>\n<td>setPrototypeOf</td>\n<td>Object.setPrototypeOf</td>\n</tr>\n<tr>\n<td>isExtensible</td>\n<td>Object.isExtensible</td>\n</tr>\n<tr>\n<td>preventExtensions</td>\n<td>Object.preventExtensions</td>\n</tr>\n<tr>\n<td>getOwnPropertyDescriptor</td>\n<td>Object.getOwnPropertyDescriptor</td>\n</tr>\n<tr>\n<td>ownKeys</td>\n<td>Object.getOwnPropertyNames, Object.getOwnPropertySymbols</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"2-리액트에서-사용-예시\" style=\"position:relative;\"><a href=\"#2-%EB%A6%AC%EC%95%A1%ED%8A%B8%EC%97%90%EC%84%9C-%EC%82%AC%EC%9A%A9-%EC%98%88%EC%8B%9C\" aria-label=\"2 리액트에서 사용 예시 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 리액트에서 사용 예시</h2>\n<h3 id=\"1-접근-권한-검증-및-제어\" style=\"position:relative;\"><a href=\"#1-%EC%A0%91%EA%B7%BC-%EA%B6%8C%ED%95%9C-%EA%B2%80%EC%A6%9D-%EB%B0%8F-%EC%A0%9C%EC%96%B4\" aria-label=\"1 접근 권한 검증 및 제어 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>(1) 접근 권한 검증 및 제어</h3>\n<p>유저 데이터를 fetch하는 함수 실행 시 <code class=\"language-text\">Proxy</code> 객체를 이용하여 접근 권한을 검증하고 제어할 수 있다.</p>\n<div\n              class=\"gatsby-code-button-container\"\n              data-toaster-id=\"76266682079581520000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"📋  코드를 복사했습니다.\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(` useEffect(() => {\r\n  const userProxy = new Proxy(fetchUserData(), {\r\n   get(target, prop) {\r\n    // 사용자가 사용자 비밀번호에 접근할 수 있는 권한이 있는지 확인합니다.\r\n    if (prop === 'password' && !isUserAdmin()) {\r\n     console.warn('Unauthorized access to password!');\r\n     return null; // null을 반환하거나 허가되지 않은 접근을 처리합니다.\r\n    }\r\n\r\n    return target[prop];\r\n   },\r\n  });\r\n\r\n  setUserData(userProxy);\r\n }, []);`, `76266682079581520000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"\"\n              >\n                copy<svg stroke=\"currentColor\" fill=\"none\" stroke-width=\"2\" viewBox=\"0 0 24 24\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"h-4 w-4\" height=\"1em\" width=\"1em\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2\"></path><rect x=\"8\" y=\"2\" width=\"8\" height=\"4\" rx=\"1\" ry=\"1\"></rect></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"> <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">const</span> userProxy <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Proxy</span><span class=\"token punctuation\">(</span><span class=\"token function\">fetchUserData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\r\n   <span class=\"token function\">get</span><span class=\"token punctuation\">(</span>target<span class=\"token punctuation\">,</span> prop<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token comment\">// 사용자가 사용자 비밀번호에 접근할 수 있는 권한이 있는지 확인합니다.</span>\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>prop <span class=\"token operator\">===</span> <span class=\"token string\">'password'</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span><span class=\"token function\">isUserAdmin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n     console<span class=\"token punctuation\">.</span><span class=\"token function\">warn</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Unauthorized access to password!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n     <span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// null을 반환하거나 허가되지 않은 접근을 처리합니다.</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token keyword\">return</span> target<span class=\"token punctuation\">[</span>prop<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\n   <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token function\">setUserData</span><span class=\"token punctuation\">(</span>userProxy<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"2-서버-상태-캐싱\" style=\"position:relative;\"><a href=\"#2-%EC%84%9C%EB%B2%84-%EC%83%81%ED%83%9C-%EC%BA%90%EC%8B%B1\" aria-label=\"2 서버 상태 캐싱 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>(2) 서버 상태 캐싱</h3>\n<div\n              class=\"gatsby-code-button-container\"\n              data-toaster-id=\"48327616091878770000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"📋  코드를 복사했습니다.\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`const cachedUserData = new Proxy([], {\r\n get: function (target: any) {\r\n  if (!target.data) {\r\n   // 캐시되지 않은 경우 데이터 가져옵니다.\r\n   target.data = fetchUserData();\r\n  } else {\r\n   console.log('Returning cached data...');\r\n  }\r\n\r\n  return target.data;\r\n },\r\n});`, `48327616091878770000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"\"\n              >\n                copy<svg stroke=\"currentColor\" fill=\"none\" stroke-width=\"2\" viewBox=\"0 0 24 24\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"h-4 w-4\" height=\"1em\" width=\"1em\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2\"></path><rect x=\"8\" y=\"2\" width=\"8\" height=\"4\" rx=\"1\" ry=\"1\"></rect></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> cachedUserData <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Proxy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\r\n <span class=\"token function-variable function\">get</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token literal-property property\">target</span><span class=\"token operator\">:</span> any</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>target<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n   <span class=\"token comment\">// 캐시되지 않은 경우 데이터 가져옵니다.</span>\r\n   target<span class=\"token punctuation\">.</span>data <span class=\"token operator\">=</span> <span class=\"token function\">fetchUserData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\r\n   console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Returning cached data...'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span>\r\n\r\n  <span class=\"token keyword\">return</span> target<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">;</span>\r\n <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"3-비용이-큰-연산-캐싱\" style=\"position:relative;\"><a href=\"#3-%EB%B9%84%EC%9A%A9%EC%9D%B4-%ED%81%B0-%EC%97%B0%EC%82%B0-%EC%BA%90%EC%8B%B1\" aria-label=\"3 비용이 큰 연산 캐싱 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>(3) 비용이 큰 연산 캐싱</h3>\n<div\n              class=\"gatsby-code-button-container\"\n              data-toaster-id=\"53177049042208520000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"📋  코드를 복사했습니다.\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`// Proxy 객체를 반환하는 함수\r\nconst createExpensiveFunction = () => {\r\n\r\n // 비용이 큰 함수\r\n const expensiveFunction = (arg) => {\r\n  console.log(\\`Calculating expensive value for \\${arg}\\`);\r\n\r\n  return arg * 2;\r\n };\r\n\r\n const cache = new Map();\r\n\r\n // Proxy 핸들러\r\n const handler = {\r\n  // apply 메서드는 함수를 호출할 때 작동\r\n  apply(target, thisArg, argumentsList) {\r\n   const arg = argumentsList[0];\r\n\r\n   if (!cache.has(arg)) {\r\n    cache.set(arg, expensiveFunction(arg));\r\n   } else {\r\n    console.log('Returning cached data...');\r\n   }\r\n\r\n   return cache.get(arg);\r\n  },\r\n };\r\n \r\n // expensiveFunction을 호출할 때마다 핸들러의 apply 메서드가 작동하는 Proxy 객체를 반환\r\n return new Proxy(expensiveFunction, handler);\r\n};`, `53177049042208520000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"\"\n              >\n                copy<svg stroke=\"currentColor\" fill=\"none\" stroke-width=\"2\" viewBox=\"0 0 24 24\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"h-4 w-4\" height=\"1em\" width=\"1em\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2\"></path><rect x=\"8\" y=\"2\" width=\"8\" height=\"4\" rx=\"1\" ry=\"1\"></rect></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// Proxy 객체를 반환하는 함수</span>\r\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">createExpensiveFunction</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n\r\n <span class=\"token comment\">// 비용이 큰 함수</span>\r\n <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">expensiveFunction</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">arg</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Calculating expensive value for </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>arg<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">return</span> arg <span class=\"token operator\">*</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\r\n <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n\r\n <span class=\"token keyword\">const</span> cache <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n <span class=\"token comment\">// Proxy 핸들러</span>\r\n <span class=\"token keyword\">const</span> handler <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token comment\">// apply 메서드는 함수를 호출할 때 작동</span>\r\n  <span class=\"token function\">apply</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">target<span class=\"token punctuation\">,</span> thisArg<span class=\"token punctuation\">,</span> argumentsList</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n   <span class=\"token keyword\">const</span> arg <span class=\"token operator\">=</span> argumentsList<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\n\r\n   <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>cache<span class=\"token punctuation\">.</span><span class=\"token function\">has</span><span class=\"token punctuation\">(</span>arg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    cache<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span>arg<span class=\"token punctuation\">,</span> <span class=\"token function\">expensiveFunction</span><span class=\"token punctuation\">(</span>arg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n   <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\r\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Returning cached data...'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n   <span class=\"token punctuation\">}</span>\r\n\r\n   <span class=\"token keyword\">return</span> cache<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>arg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n \r\n <span class=\"token comment\">// expensiveFunction을 호출할 때마다 핸들러의 apply 메서드가 작동하는 Proxy 객체를 반환</span>\r\n <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Proxy</span><span class=\"token punctuation\">(</span>expensiveFunction<span class=\"token punctuation\">,</span> handler<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"3-마치며\" style=\"position:relative;\"><a href=\"#3-%EB%A7%88%EC%B9%98%EB%A9%B0\" aria-label=\"3 마치며 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. 마치며</h2>\n<p>데코레이터를 사용하는 것과 비슷한 느낌이다, <code class=\"language-text\">Typescript</code>에서 제공하는 데코레이터를 리액트에서 활용을 못해서 아쉬웠는데 <code class=\"language-text\">Proxy</code>를 이용하면 데코레이터와 비슷한 기능을 구현할 수 있을 것 같다.</p>","tableOfContents":"<ul>\n<li>\n<p><a href=\"#0-%EB%93%A4%EC%96%B4%EA%B0%80%EB%A9%B0\">0. 들어가며</a></p>\n</li>\n<li>\n<p><a href=\"#1-js-proxy-%EA%B0%9D%EC%B2%B4\">1. JS Proxy 객체</a></p>\n</li>\n<li>\n<p><a href=\"#2-%EB%A6%AC%EC%95%A1%ED%8A%B8%EC%97%90%EC%84%9C-%EC%82%AC%EC%9A%A9-%EC%98%88%EC%8B%9C\">2. 리액트에서 사용 예시</a></p>\n<ul>\n<li><a href=\"#1-%EC%A0%91%EA%B7%BC-%EA%B6%8C%ED%95%9C-%EA%B2%80%EC%A6%9D-%EB%B0%8F-%EC%A0%9C%EC%96%B4\">(1) 접근 권한 검증 및 제어</a></li>\n<li><a href=\"#2-%EC%84%9C%EB%B2%84-%EC%83%81%ED%83%9C-%EC%BA%90%EC%8B%B1\">(2) 서버 상태 캐싱</a></li>\n<li><a href=\"#3-%EB%B9%84%EC%9A%A9%EC%9D%B4-%ED%81%B0-%EC%97%B0%EC%82%B0-%EC%BA%90%EC%8B%B1\">(3) 비용이 큰 연산 캐싱</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#3-%EB%A7%88%EC%B9%98%EB%A9%B0\">3. 마치며</a></p>\n</li>\n</ul>","frontmatter":{"title":"JS Proxy 패턴","summary":"JS에서 Proxy 객체와 사용법","date":"2024년 01월 15일","tags":["디자인 패턴","JS"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACvElEQVR42lWSO2/TUBSAD2l4CEHTR5KmzYPUdu7LdmLH9o3j2HGTPmhVSidEBRLQGSSWSFAGJCZmfgE7I4hSwQgMbGxMCMoIYiidCjgXOW2BHuk7517pnu+c4QKmDsSoqgd5GR9bbF5NrDjXRo1CMMYyzuicfmH8ysz6aSikQGVugjB+DNN9yH5NHDpiAMUH5gCq1oGQEHrBk1MTw/L7Yk76RCTtQ3o4913J6r1UKg2duTVA1AZM+QByUI8IK/EDFl/4yCTVFUX2ydSodjOXoT256N3JjJV7pMxXrHpQYowrRG3I9ABMuUwoR3HvXyFjjWQ8iTC+YTNf1KzGL8Nv7nZaiz/mvMVd257dURjfk7EjKsQRmP6DMB4RxgVmzgZhA0cSKOPJgZ3xDZN6osbbP80gFMvhqrg4syK6jWUR1j3Rtfw+NwJBNK+vVVt9TW/2EbF/ov0hGwcbJgfpQHhXwXWh+wt7RmM+WgqWo9XOQnTeXYout91oLfCjxWA+CrudKOzORxbvRlWjtafXvHjTu/GGVG0kB4lpLjDNvcfUhmD14LduhaJlh6LdCIRrtkXX4WLe8YRr+6I71xKtdiCqZiAMMxA10xdE5fcNM4Rz2DoZi5J6zQNVb/a0micQtnYQsXaw2tyu0Bi+TWnri6nNbEvY/lZ1Ol+p3vqMsL2NCf+IibNLmHsjX6oApIsAFWyBpBigoPq4LJs1VOfILS/MllLSJppEL9Ek2iJTlS2WnX5n5vFt5BoPC7L0pkzoZhGRrRJirwqIPU7lio9GFHP9fyEUqQZG3odLcD2XOT7xVM5KL5Ts9HM5W3paGs68NVNTl9Ikfys9NfG6hORneWl6s6Aoz4sVvDWSnXx3tkQeHPmUWHUSWLITIGAQWocADSgoHoGh7Ck4jDMwBK6uQ1Uqg6tiCOo1GDuRAIAh+AM5G9cEeHa+qAAAAABJRU5ErkJggg=="},"images":{"fallback":{"src":"/static/340c7bf65f23d40d8adae8164ec59100/47784/image.png","srcSet":"/static/340c7bf65f23d40d8adae8164ec59100/822a9/image.png 350w,\n/static/340c7bf65f23d40d8adae8164ec59100/66634/image.png 700w,\n/static/340c7bf65f23d40d8adae8164ec59100/47784/image.png 1400w","sizes":"(min-width: 1400px) 1400px, 100vw"},"sources":[{"srcSet":"/static/340c7bf65f23d40d8adae8164ec59100/e5908/image.webp 350w,\n/static/340c7bf65f23d40d8adae8164ec59100/23874/image.webp 700w,\n/static/340c7bf65f23d40d8adae8164ec59100/238c1/image.webp 1400w","type":"image/webp","sizes":"(min-width: 1400px) 1400px, 100vw"}]},"width":1400,"height":787}},"publicURL":"/static/340c7bf65f23d40d8adae8164ec59100/image.png"},"sources":["superLipbalm님의 블로그"],"sources_link":["https://gist.github.com/superLipbalm/dea43695b66897d1b4d246b402aab320"]}}}]}},"pageContext":{"slug":"/tech/2024-01-15-Proxy-패턴/","previous":{"fields":{"slug":"/tech/2024-01-06-Git-명령어/"},"frontmatter":{"tags":["Git"],"categories":null,"update":true,"title":"Git 명령어"}},"next":{"fields":{"slug":"/tech/2024-03-12-package-lock.json/"},"frontmatter":{"tags":["JS","NPM"],"categories":null,"update":true,"title":"package-lock.json"}}}},"staticQueryHashes":[],"slicesMap":{}}